<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>android源码修改（1） ——日历中显示农历、日历图标随时间改变 | 极光轨迹</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="极光轨迹">
    
    <meta name="author" content="Jxust_CGS">
    
    <meta name="description" itemprop="description" content="记录老师布置的小练习之修改android源码中的日历，为日历添加农历显示选项和让日历的图标随日期更改">
    
	
	<meta name="Keywords" content="android源码,日历,农历,安卓">
    

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="极光轨迹" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="atom.xml">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml">
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
  
  <script src="/js/busuanzi.pure.mini.js"></script>
  <script src="/js/lufei.js"></script>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">
	  <!-- ============================ START lufei =========================== -->
		<div id="xiaoren" class="xiaoren">
			<div id="message">正在加载中……</div>
			<div id="lufei" class="lufei"></div>
		</div>
	  <!-- ============================ END lufei =========================== -->
      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close">
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">首页</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">文章</a></li>
            <!-- Dropdown Menu -->
            
        	<li>
        		<a class="sb-toggle-submenu">分类<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/Angular/" class="animsition-link">Angular<small>(1)</small></a></li>
				    
				    <li><a href="/categories/Hibernate/" class="animsition-link">Hibernate<small>(6)</small></a></li>
				    
				    <li><a href="/categories/Java/" class="animsition-link">Java<small>(1)</small></a></li>
				    
				    <li><a href="/categories/Radis/" class="animsition-link">Radis<small>(1)</small></a></li>
				    
				    <li><a href="/categories/Spring/" class="animsition-link">Spring<small>(4)</small></a></li>
				    
				    <li><a href="/categories/android/" class="animsition-link">android<small>(13)</small></a></li>
				    
				    <li><a href="/categories/android源码/" class="animsition-link">android源码<small>(3)</small></a></li>
				    
				    <li><a href="/categories/fullcalendar-js/" class="animsition-link">fullcalendar.js<small>(1)</small></a></li>
				    
				    <li><a href="/categories/git/" class="animsition-link">git<small>(1)</small></a></li>
				    
				    <li><a href="/categories/html/" class="animsition-link">html<small>(2)</small></a></li>
				    
				    <li><a href="/categories/java/" class="animsition-link">java<small>(3)</small></a></li>
				    
				    <li><a href="/categories/linux/" class="animsition-link">linux<small>(2)</small></a></li>
				    
				    <li><a href="/categories/modem/" class="animsition-link">modem<small>(1)</small></a></li>
				    
				    <li><a href="/categories/python/" class="animsition-link">python<small>(1)</small></a></li>
				    
				    <li><a href="/categories/web/" class="animsition-link">web<small>(2)</small></a></li>
				    
				    <li><a href="/categories/杂谈/" class="animsition-link">杂谈<small>(2)</small></a></li>
				    
				    <li><a href="/categories/正则表达式/" class="animsition-link">正则表达式<small>(1)</small></a></li>
				    
				    <li><a href="/categories/设计模式/" class="animsition-link">设计模式<small>(1)</small></a></li>
				    
				    <li><a href="/categories/阿里云/" class="animsition-link">阿里云<small>(1)</small></a></li>
				    
				</ul>
        	</li>
			
			
        	<li>
        		<a class="sb-toggle-submenu">标签<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/tags/Angular/" class="animsition-link">Angular<small>(1)</small></a></li>
				    
				    <li><a href="/tags/Hibernate/" class="animsition-link">Hibernate<small>(6)</small></a></li>
				    
				    <li><a href="/tags/Json/" class="animsition-link">Json<small>(1)</small></a></li>
				    
				    <li><a href="/tags/Maven/" class="animsition-link">Maven<small>(1)</small></a></li>
				    
				    <li><a href="/tags/Radis/" class="animsition-link">Radis<small>(1)</small></a></li>
				    
				    <li><a href="/tags/Spring/" class="animsition-link">Spring<small>(4)</small></a></li>
				    
				    <li><a href="/tags/android/" class="animsition-link">android<small>(12)</small></a></li>
				    
				    <li><a href="/tags/android源码/" class="animsition-link">android源码<small>(3)</small></a></li>
				    
				    <li><a href="/tags/android源码-android/" class="animsition-link">android源码,android<small>(1)</small></a></li>
				    
				    <li><a href="/tags/bootstrap/" class="animsition-link">bootstrap<small>(2)</small></a></li>
				    
				    <li><a href="/tags/first/" class="animsition-link">first<small>(1)</small></a></li>
				    
				    <li><a href="/tags/freemarker/" class="animsition-link">freemarker<small>(1)</small></a></li>
				    
				    <li><a href="/tags/fullcalendar-js/" class="animsition-link">fullcalendar.js<small>(1)</small></a></li>
				    
				    <li><a href="/tags/git/" class="animsition-link">git<small>(1)</small></a></li>
				    
				    <li><a href="/tags/html/" class="animsition-link">html<small>(2)</small></a></li>
				    
				    <li><a href="/tags/linux/" class="animsition-link">linux<small>(1)</small></a></li>
				    
				    <li><a href="/tags/selenium/" class="animsition-link">selenium<small>(1)</small></a></li>
				    
				    <li><a href="/tags/shell-linux/" class="animsition-link">shell,linux<small>(1)</small></a></li>
				    
				    <li><a href="/tags/velocity/" class="animsition-link">velocity<small>(1)</small></a></li>
				    
				    <li><a href="/tags/术语/" class="animsition-link">术语<small>(1)</small></a></li>
				    
				    <li><a href="/tags/正则表达式/" class="animsition-link">正则表达式<small>(1)</small></a></li>
				    
				    <li><a href="/tags/设计模式/" class="animsition-link">设计模式<small>(1)</small></a></li>
				    
				    <li><a href="/tags/超级终端-at指令/" class="animsition-link">超级终端,at指令<small>(1)</small></a></li>
				    
				    <li><a href="/tags/阿里云/" class="animsition-link">阿里云<small>(1)</small></a></li>
				    
				</ul>
        	</li>
			
			
            <li>
                <a class="sb-toggle-submenu">其他<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="/links" target="_BLANK" class="animsition-link">导航</a></li>
                    
                </ul>
            </li>
            
            
            <li>
                <a class="sb-toggle-submenu">友情链接<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a target="_blank" rel="noopener" href="http://ykzhai.top/" class="animsition-link">砦龑堃</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/curriculumvitae" class="animsition-link" title="about">关于</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.png" alt="Logo" width="35px;"> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">极光轨迹</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/jxust-CGS" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            
                            
                            
                            <li><a href="http://weibo.com/jxustCGS" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">更多</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->


      
<section id="intro">
    <div class="container">
		<div class="row col-md-offset-2">
            <div class="col-md-8">
                <h1>android源码修改（1） ——日历中显示农历、日历图标随时间改变</h1>
		<span class="post-meta">
      <time datetime="2016-04-29T03:36:00.000Z" itemprop="datePublished">
          2016-04-29
      </time>
	
    
    | 分类：
    <a class="categories" href="/categories/android源码/">android源码</a>
    
    
    
    
    | 标签：
    <a class="tags" href="/tags/android源码/">android源码</a>
    
    
</span>
		<br>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h1 id="显示农历"><a href="#显示农历" class="headerlink" title="显示农历"></a>显示农历</h1><h2 id="写出公历与农历的转换函数"><a href="#写出公历与农历的转换函数" class="headerlink" title="写出公历与农历的转换函数"></a>写出公历与农历的转换函数</h2><p>参考文章：<a target="_blank" rel="noopener" href="http://blog.csdn.net/liangguo03/article/details/7097388">日历农历算法</a><br>算法由参考文章中获得，不过我有点强迫症看着算法是对的,美中不足是输出格式不是很好，必须修改修改^_^  </p>
<pre><code>package main;
import java.util.Calendar;
/**
 * ChineseCalendarGB.java Copyright (c) 1997-2002 by Dr. Herong Yang 中国农历算法 -
 * 实用于公历 1901 年至 2100 年之间的 200 年
 */
public class CalendarUtil &#123;
    private int gregorianYear;
    private int gregorianMonth;
    private int gregorianDate;
    private boolean isGregorianLeap;
    private int dayOfYear;
    private int dayOfWeek; // 周日一星期的第一天
    private int chineseYear;
    private int chineseMonth; // 负数表示闰月
    private int chineseDate;
    private int sectionalTerm;// 本月节气的日期
    private int principleTerm;// 本月中气的日期
    private static char[] daysInGregorianMonth = &#123; 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 &#125;;
    // 天干
    private static String[] stemNames = &#123; &quot;甲&quot;, &quot;乙&quot;, &quot;丙&quot;, &quot;丁&quot;, &quot;戊&quot;, &quot;己&quot;, &quot;庚&quot;, &quot;辛&quot;, &quot;壬&quot;, &quot;癸&quot; &#125;;
    // 地支
    private static String[] branchNames = &#123; &quot;子&quot;, &quot;丑&quot;, &quot;寅&quot;, &quot;卯&quot;, &quot;辰&quot;, &quot;巳&quot;, &quot;午&quot;, &quot;未&quot;, &quot;申&quot;, &quot;酉&quot;, &quot;戌&quot;, &quot;亥&quot; &#125;;

    private static String[] animalNames = &#123; &quot;鼠&quot;, &quot;牛&quot;, &quot;虎&quot;, &quot;兔&quot;, &quot;龙&quot;, &quot;蛇&quot;, &quot;马&quot;, &quot;羊&quot;, &quot;猴&quot;, &quot;鸡&quot;, &quot;狗&quot;, &quot;猪&quot; &#125;;

    public static String[] daysOfWeek = &#123; &quot;星期日&quot;, &quot;星期一&quot;, &quot;星期二&quot;, &quot;星期三&quot;, &quot;星期四&quot;, &quot;星期五&quot;, &quot;星期六&quot; &#125;;

    private static String[] monthOfAlmanac = &#123; &quot;正月&quot;, &quot;二月&quot;, &quot;三月&quot;, &quot;四月&quot;, &quot;五月&quot;, &quot;六月&quot;, &quot;七月&quot;, &quot;八月&quot;, &quot;九月&quot;, &quot;十月&quot;, &quot;冬月&quot;, &quot;腊月&quot; &#125;;
    private static String[] monthNames = &#123; &quot;一&quot;, &quot;二&quot;, &quot;三&quot;, &quot;四&quot;, &quot;五&quot;, &quot;六&quot;, &quot;七&quot;, &quot;八&quot;, &quot;九&quot;, &quot;十&quot;, &quot;十一&quot;, &quot;十二&quot; &#125;;

    private static String[] daysOfAlmanac = &#123; &quot;初一&quot;, &quot;初二&quot;, &quot;初三&quot;, &quot;初四&quot;, &quot;初五&quot;, &quot;初六&quot;, &quot;初七&quot;, &quot;初八&quot;, &quot;初九&quot;, &quot;初十&quot;, &quot;十一&quot;, &quot;十二&quot;,
            &quot;十三&quot;, &quot;十四&quot;, &quot;十五&quot;, &quot;十六&quot;, &quot;十七&quot;, &quot;十八&quot;, &quot;十九&quot;, &quot;二十&quot;, &quot;廿一&quot;, &quot;廿二&quot;, &quot;廿三&quot;, &quot;廿四&quot;, &quot;廿五&quot;, &quot;廿六&quot;, &quot;廿七&quot;, &quot;廿八&quot;, &quot;廿九&quot;,
            &quot;三十&quot; &#125;; // 农历的天数

    private static String[] principleTermNames = &#123; &quot;雨水&quot;, &quot;春分&quot;, &quot;谷雨&quot;, &quot;夏满&quot;, &quot;夏至&quot;, &quot;大暑&quot;, &quot;处暑&quot;, &quot;秋分&quot;, &quot;霜降&quot;, &quot;小雪&quot;, &quot;冬至&quot;,
            &quot;大寒&quot; &#125;;

    private static String[] sectionalTermNames = &#123; &quot;立春&quot;, &quot;惊蛰&quot;, &quot;清明&quot;, &quot;立夏&quot;, &quot;芒种&quot;, &quot;小暑&quot;, &quot;立秋&quot;, &quot;白露&quot;, &quot;寒露&quot;, &quot;立冬&quot;, &quot;大雪&quot;,
            &quot;小寒&quot; &#125;;

    // 农历月份大小压缩表，两个字节表示一年。两个字节共十六个二进制位数，
    // 前四个位数表示闰月月份，后十二个位数表示十二个农历月份的大小。
    private static char[] chineseMonths = &#123; 0x00, 0x04, 0xad, 0x08, 0x5a, 0x01, 0xd5, 0x54, 0xb4, 0x09, 0x64, 0x05,
            0x59, 0x45, 0x95, 0x0a, 0xa6, 0x04, 0x55, 0x24, 0xad, 0x08, 0x5a, 0x62, 0xda, 0x04, 0xb4, 0x05, 0xb4, 0x55,
            0x52, 0x0d, 0x94, 0x0a, 0x4a, 0x2a, 0x56, 0x02, 0x6d, 0x71, 0x6d, 0x01, 0xda, 0x02, 0xd2, 0x52, 0xa9, 0x05,
            0x49, 0x0d, 0x2a, 0x45, 0x2b, 0x09, 0x56, 0x01, 0xb5, 0x20, 0x6d, 0x01, 0x59, 0x69, 0xd4, 0x0a, 0xa8, 0x05,
            0xa9, 0x56, 0xa5, 0x04, 0x2b, 0x09, 0x9e, 0x38, 0xb6, 0x08, 0xec, 0x74, 0x6c, 0x05, 0xd4, 0x0a, 0xe4, 0x6a,
            0x52, 0x05, 0x95, 0x0a, 0x5a, 0x42, 0x5b, 0x04, 0xb6, 0x04, 0xb4, 0x22, 0x6a, 0x05, 0x52, 0x75, 0xc9, 0x0a,
            0x52, 0x05, 0x35, 0x55, 0x4d, 0x0a, 0x5a, 0x02, 0x5d, 0x31, 0xb5, 0x02, 0x6a, 0x8a, 0x68, 0x05, 0xa9, 0x0a,
            0x8a, 0x6a, 0x2a, 0x05, 0x2d, 0x09, 0xaa, 0x48, 0x5a, 0x01, 0xb5, 0x09, 0xb0, 0x39, 0x64, 0x05, 0x25, 0x75,
            0x95, 0x0a, 0x96, 0x04, 0x4d, 0x54, 0xad, 0x04, 0xda, 0x04, 0xd4, 0x44, 0xb4, 0x05, 0x54, 0x85, 0x52, 0x0d,
            0x92, 0x0a, 0x56, 0x6a, 0x56, 0x02, 0x6d, 0x02, 0x6a, 0x41, 0xda, 0x02, 0xb2, 0xa1, 0xa9, 0x05, 0x49, 0x0d,
            0x0a, 0x6d, 0x2a, 0x09, 0x56, 0x01, 0xad, 0x50, 0x6d, 0x01, 0xd9, 0x02, 0xd1, 0x3a, 0xa8, 0x05, 0x29, 0x85,
            0xa5, 0x0c, 0x2a, 0x09, 0x96, 0x54, 0xb6, 0x08, 0x6c, 0x09, 0x64, 0x45, 0xd4, 0x0a, 0xa4, 0x05, 0x51, 0x25,
            0x95, 0x0a, 0x2a, 0x72, 0x5b, 0x04, 0xb6, 0x04, 0xac, 0x52, 0x6a, 0x05, 0xd2, 0x0a, 0xa2, 0x4a, 0x4a, 0x05,
            0x55, 0x94, 0x2d, 0x0a, 0x5a, 0x02, 0x75, 0x61, 0xb5, 0x02, 0x6a, 0x03, 0x61, 0x45, 0xa9, 0x0a, 0x4a, 0x05,
            0x25, 0x25, 0x2d, 0x09, 0x9a, 0x68, 0xda, 0x08, 0xb4, 0x09, 0xa8, 0x59, 0x54, 0x03, 0xa5, 0x0a, 0x91, 0x3a,
            0x96, 0x04, 0xad, 0xb0, 0xad, 0x04, 0xda, 0x04, 0xf4, 0x62, 0xb4, 0x05, 0x54, 0x0b, 0x44, 0x5d, 0x52, 0x0a,
            0x95, 0x04, 0x55, 0x22, 0x6d, 0x02, 0x5a, 0x71, 0xda, 0x02, 0xaa, 0x05, 0xb2, 0x55, 0x49, 0x0b, 0x4a, 0x0a,
            0x2d, 0x39, 0x36, 0x01, 0x6d, 0x80, 0x6d, 0x01, 0xd9, 0x02, 0xe9, 0x6a, 0xa8, 0x05, 0x29, 0x0b, 0x9a, 0x4c,
            0xaa, 0x08, 0xb6, 0x08, 0xb4, 0x38, 0x6c, 0x09, 0x54, 0x75, 0xd4, 0x0a, 0xa4, 0x05, 0x45, 0x55, 0x95, 0x0a,
            0x9a, 0x04, 0x55, 0x44, 0xb5, 0x04, 0x6a, 0x82, 0x6a, 0x05, 0xd2, 0x0a, 0x92, 0x6a, 0x4a, 0x05, 0x55, 0x0a,
            0x2a, 0x4a, 0x5a, 0x02, 0xb5, 0x02, 0xb2, 0x31, 0x69, 0x03, 0x31, 0x73, 0xa9, 0x0a, 0x4a, 0x05, 0x2d, 0x55,
            0x2d, 0x09, 0x5a, 0x01, 0xd5, 0x48, 0xb4, 0x09, 0x68, 0x89, 0x54, 0x0b, 0xa4, 0x0a, 0xa5, 0x6a, 0x95, 0x04,
            0xad, 0x08, 0x6a, 0x44, 0xda, 0x04, 0x74, 0x05, 0xb0, 0x25, 0x54, 0x03 &#125;;

    // 初始日，公历农历对应日期：
    // 公历 1901 年 1 月 1 日，对应农历 4598 年 11 月 11 日
    private static int baseYear = 1901;
    private static int baseMonth = 1;
    private static int baseDate = 1;
    private static int baseIndex = 0;
    private static int baseChineseYear = 4598 - 1;
    private static int baseChineseMonth = 11;
    private static int baseChineseDate = 11;

    private static char[][] sectionalTermMap = &#123;
            &#123; 7, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6, 5, 5, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 4, 5, 5 &#125;,
            &#123; 5, 4, 5, 5, 5, 4, 4, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4, 3, 4, 4, 4, 3, 3, 4, 4, 3, 3, 3 &#125;,
            &#123; 6, 6, 6, 7, 6, 6, 6, 6, 5, 6, 6, 6, 5, 5, 6, 6, 5, 5, 5, 6, 5, 5, 5, 5, 4, 5, 5, 5, 5 &#125;,
            &#123; 5, 5, 6, 6, 5, 5, 5, 6, 5, 5, 5, 5, 4, 5, 5, 5, 4, 4, 5, 5, 4, 4, 4, 5, 4, 4, 4, 4, 5 &#125;,
            &#123; 6, 6, 6, 7, 6, 6, 6, 6, 5, 6, 6, 6, 5, 5, 6, 6, 5, 5, 5, 6, 5, 5, 5, 5, 4, 5, 5, 5, 5 &#125;,
            &#123; 6, 6, 7, 7, 6, 6, 6, 7, 6, 6, 6, 6, 5, 6, 6, 6, 5, 5, 6, 6, 5, 5, 5, 6, 5, 5, 5, 5, 4, 5, 5, 5, 5 &#125;,
            &#123; 7, 8, 8, 8, 7, 7, 8, 8, 7, 7, 7, 8, 7, 7, 7, 7, 6, 7, 7, 7, 6, 6, 7, 7, 6, 6, 6, 7, 7 &#125;,
            &#123; 8, 8, 8, 9, 8, 8, 8, 8, 7, 8, 8, 8, 7, 7, 8, 8, 7, 7, 7, 8, 7, 7, 7, 7, 6, 7, 7, 7, 6, 6, 7, 7, 7 &#125;,
            &#123; 8, 8, 8, 9, 8, 8, 8, 8, 7, 8, 8, 8, 7, 7, 8, 8, 7, 7, 7, 8, 7, 7, 7, 7, 6, 7, 7, 7, 7 &#125;,
            &#123; 9, 9, 9, 9, 8, 9, 9, 9, 8, 8, 9, 9, 8, 8, 8, 9, 8, 8, 8, 8, 7, 8, 8, 8, 7, 7, 8, 8, 8 &#125;,
            &#123; 8, 8, 8, 8, 7, 8, 8, 8, 7, 7, 8, 8, 7, 7, 7, 8, 7, 7, 7, 7, 6, 7, 7, 7, 6, 6, 7, 7, 7 &#125;,
            &#123; 7, 8, 8, 8, 7, 7, 8, 8, 7, 7, 7, 8, 7, 7, 7, 7, 6, 7, 7, 7, 6, 6, 7, 7, 6, 6, 6, 7, 7 &#125; &#125;;

    private static char[][] sectionalTermYear = &#123; &#123; 13, 49, 85, 117, 149, 185, 201, 250, 250 &#125;,
            &#123; 13, 45, 81, 117, 149, 185, 201, 250, 250 &#125;, &#123; 13, 48, 84, 112, 148, 184, 200, 201, 250 &#125;,
            &#123; 13, 45, 76, 108, 140, 172, 200, 201, 250 &#125;, &#123; 13, 44, 72, 104, 132, 168, 200, 201, 250 &#125;,
            &#123; 5, 33, 68, 96, 124, 152, 188, 200, 201 &#125;, &#123; 29, 57, 85, 120, 148, 176, 200, 201, 250 &#125;,
            &#123; 13, 48, 76, 104, 132, 168, 196, 200, 201 &#125;, &#123; 25, 60, 88, 120, 148, 184, 200, 201, 250 &#125;,
            &#123; 16, 44, 76, 108, 144, 172, 200, 201, 250 &#125;, &#123; 28, 60, 92, 124, 160, 192, 200, 201, 250 &#125;,
            &#123; 17, 53, 85, 124, 156, 188, 200, 201, 250 &#125; &#125;;

    private static char[][] principleTermMap = &#123;
            &#123; 21, 21, 21, 21, 21, 20, 21, 21, 21, 20, 20, 21, 21, 20, 20, 20, 20, 20, 20, 20, 20, 19, 20, 20, 20, 19,
                    19, 20 &#125;,
            &#123; 20, 19, 19, 20, 20, 19, 19, 19, 19, 19, 19, 19, 19, 18, 19, 19, 19, 18, 18, 19, 19, 18, 18, 18, 18, 18,
                    18, 18 &#125;,
            &#123; 21, 21, 21, 22, 21, 21, 21, 21, 20, 21, 21, 21, 20, 20, 21, 21, 20, 20, 20, 21, 20, 20, 20, 20, 19, 20,
                    20, 20, 20 &#125;,
            &#123; 20, 21, 21, 21, 20, 20, 21, 21, 20, 20, 20, 21, 20, 20, 20, 20, 19, 20, 20, 20, 19, 19, 20, 20, 19, 19,
                    19, 20, 20 &#125;,
            &#123; 21, 22, 22, 22, 21, 21, 22, 22, 21, 21, 21, 22, 21, 21, 21, 21, 20, 21, 21, 21, 20, 20, 21, 21, 20, 20,
                    20, 21, 21 &#125;,
            &#123; 22, 22, 22, 22, 21, 22, 22, 22, 21, 21, 22, 22, 21, 21, 21, 22, 21, 21, 21, 21, 20, 21, 21, 21, 20, 20,
                    21, 21, 21 &#125;,
            &#123; 23, 23, 24, 24, 23, 23, 23, 24, 23, 23, 23, 23, 22, 23, 23, 23, 22, 22, 23, 23, 22, 22, 22, 23, 22, 22,
                    22, 22, 23 &#125;,
            &#123; 23, 24, 24, 24, 23, 23, 24, 24, 23, 23, 23, 24, 23, 23, 23, 23, 22, 23, 23, 23, 22, 22, 23, 23, 22, 22,
                    22, 23, 23 &#125;,
            &#123; 23, 24, 24, 24, 23, 23, 24, 24, 23, 23, 23, 24, 23, 23, 23, 23, 22, 23, 23, 23, 22, 22, 23, 23, 22, 22,
                    22, 23, 23 &#125;,
            &#123; 24, 24, 24, 24, 23, 24, 24, 24, 23, 23, 24, 24, 23, 23, 23, 24, 23, 23, 23, 23, 22, 23, 23, 23, 22, 22,
                    23, 23, 23 &#125;,
            &#123; 23, 23, 23, 23, 22, 23, 23, 23, 22, 22, 23, 23, 22, 22, 22, 23, 22, 22, 22, 22, 21, 22, 22, 22, 21, 21,
                    22, 22, 22 &#125;,
            &#123; 22, 22, 23, 23, 22, 22, 22, 23, 22, 22, 22, 22, 21, 22, 22, 22, 21, 21, 22, 22, 21, 21, 21, 22, 21, 21,
                    21, 21, 22 &#125; &#125;;

    private static char[][] principleTermYear = &#123; &#123; 13, 45, 81, 113, 149, 185, 201 &#125;,
            &#123; 21, 57, 93, 125, 161, 193, 201 &#125;, &#123; 21, 56, 88, 120, 152, 188, 200, 201 &#125;,
            &#123; 21, 49, 81, 116, 144, 176, 200, 201 &#125;, &#123; 17, 49, 77, 112, 140, 168, 200, 201 &#125;,
            &#123; 28, 60, 88, 116, 148, 180, 200, 201 &#125;, &#123; 25, 53, 84, 112, 144, 172, 200, 201 &#125;,
            &#123; 29, 57, 89, 120, 148, 180, 200, 201 &#125;, &#123; 17, 45, 73, 108, 140, 168, 200, 201 &#125;,
            &#123; 28, 60, 92, 124, 160, 192, 200, 201 &#125;, &#123; 16, 44, 80, 112, 148, 180, 200, 201 &#125;,
            &#123; 17, 53, 88, 120, 156, 188, 200, 201 &#125; &#125;;

    private static int[] bigLeapMonthYears = &#123;
            // 大闰月的闰年年份
            6, 14, 19, 25, 33, 36, 38, 41, 44, 52, 55, 79, 117, 136, 147, 150, 155, 158, 185, 193 &#125;;

    public CalendarUtil() &#123;
        setGregorian(1901, 1, 1);
        computeChineseFields();
        computeSolarTerms();
    &#125;

    public CalendarUtil(int y, int m, int d)&#123;
        setGregorian(y, m, d);
        computeChineseFields();
        computeSolarTerms();
    &#125;

    /**
     * 得到对应天的农历 要判断闰月 月初 月末 *
     *
     * @param y
     * @param m
     * @param d
     * @return String
     */
    public String getChineseDay(int y, int m, int d) &#123;
        CalendarUtil c=new CalendarUtil(y,m,d);
        int cd = c.getChineseDate();
        return daysOfAlmanac[cd - 1];
    &#125;

    /**
     * 得到对应天的农历 要判断闰月 月初 月末
     *
     * @param y
     * @param m
     * @param d
     * @return
     */
    public String getChineseMonth(int y, int m, int d) &#123;
        setGregorian(y, m, d);
        computeChineseFields();
        computeSolarTerms();
        int cd = getChineseMonth();
        if (cd &lt; 1 || cd &gt; 29)
            cd = 1;
        return monthOfAlmanac[cd - 1];
    &#125;

    /**
     * 设置公历年月日
     * @param y
     * @param m
     * @param d
     */
    public void setGregorian(int y, int m, int d) &#123;
        gregorianYear = y;
        gregorianMonth = m;
        gregorianDate = d;
        isGregorianLeap = isGregorianLeapYear(y);
        dayOfYear = dayOfYear(y, m, d);
        dayOfWeek = dayOfWeek(y, m, d);
        chineseYear = 0;
        chineseMonth = 0;
        chineseDate = 0;
        sectionalTerm = 0;
        principleTerm = 0;
    &#125;

    /**
     *  判断是否是公历闰年
     * @param year
     * @return
     */
    public static boolean isGregorianLeapYear(int year) &#123;
        boolean isLeap = false;
        if (year % 4 == 0)
            isLeap = true;
        if (year % 100 == 0)
            isLeap = false;
        if (year % 400 == 0)
            isLeap = true;
        return isLeap;
    &#125;

    /**
     * 返回一个月有几天
     * @param y
     * @param m
     * @return
     */
    public static int daysInGregorianMonth(int y, int m) &#123;
        int d = daysInGregorianMonth[m - 1];
        if (m == 2 &amp;&amp; isGregorianLeapYear(y))
            d++; // 公历闰年二月多一天
        return d;
    &#125;

    /**
     * 计算当前天在本年中是第几天
     * @param y
     * @param m
     * @param d
     * @return
     */
    public static int dayOfYear(int y, int m, int d) &#123;
        int c = 0;
        for (int i = 1; i &lt; m; i++) &#123;
            c = c + daysInGregorianMonth(y, i);
        &#125;
        c = c + d;
        return c;
    &#125;

    /**
     * 当前天是本周的第几天 ， 从星期天开始算
     * @param y
     * @param m
     * @param d
     * @return
     */
    public static int dayOfWeek(int y, int m, int d) &#123;
        int w = 1; // 公历一年一月一日是星期一，所以起始值为星期日
        y = (y - 1) % 400 + 1; // 公历星期值分部 400 年循环一次
        int ly = (y - 1) / 4; // 闰年次数
        ly = ly - (y - 1) / 100;
        ly = ly + (y - 1) / 400;
        int ry = y - 1 - ly; // 常年次数
        w = w + ry; // 常年星期值增一
        w = w + 2 * ly; // 闰年星期值增二
        w = w + dayOfYear(y, m, d);
        w = (w - 1) % 7 + 1;
        return w;
    &#125;

    /**
     * 计算农历
     * @return
     */
    public int computeChineseFields() &#123;
        if (gregorianYear &lt; 1901 || gregorianYear &gt; 2100)
            return 1;
        int startYear = baseYear;
        int startMonth = baseMonth;
        int startDate = baseDate;
        chineseYear = baseChineseYear;
        chineseMonth = baseChineseMonth;
        chineseDate = baseChineseDate;
        // 第二个对应日，用以提高计算效率
        // 公历 2000 年 1 月 1 日，对应农历 4697 年 11 月 25 日
        if (gregorianYear &gt;= 2000) &#123;
            startYear = baseYear + 99;
            startMonth = 1;
            startDate = 1;
            chineseYear = baseChineseYear + 99;
            chineseMonth = 11;
            chineseDate = 25;
        &#125;
        int daysDiff = 0;
        for (int i = startYear; i &lt; gregorianYear; i++) &#123;
            daysDiff += 365;
            if (isGregorianLeapYear(i))
                daysDiff += 1; // leap year
        &#125;
        for (int i = startMonth; i &lt; gregorianMonth; i++) &#123;
            daysDiff += daysInGregorianMonth(gregorianYear, i);
        &#125;
        daysDiff += gregorianDate - startDate;

        chineseDate += daysDiff;
        int lastDate = daysInChineseMonth(chineseYear, chineseMonth);
        int nextMonth = nextChineseMonth(chineseYear, chineseMonth);
        while (chineseDate &gt; lastDate) &#123;
            if (Math.abs(nextMonth) &lt; Math.abs(chineseMonth))
                chineseYear++;
            chineseMonth = nextMonth;
            chineseDate -= lastDate;
            lastDate = daysInChineseMonth(chineseYear, chineseMonth);
            nextMonth = nextChineseMonth(chineseYear, chineseMonth);
        &#125;
        return 0;
    &#125;

    public static int daysInChineseMonth(int y, int m) &#123;
        // 注意：闰月 m &lt; 0
        int index = y - baseChineseYear + baseIndex;
        int v = 0;
        int l = 0;
        int d = 30;
        if (1 &lt;= m &amp;&amp; m &lt;= 8) &#123;
            v = chineseMonths[2 * index];
            l = m - 1;
            if (((v &gt;&gt; l) &amp; 0x01) == 1)
                d = 29;
        &#125; else if (9 &lt;= m &amp;&amp; m &lt;= 12) &#123;
            v = chineseMonths[2 * index + 1];
            l = m - 9;
            if (((v &gt;&gt; l) &amp; 0x01) == 1)
                d = 29;
        &#125; else &#123;
            v = chineseMonths[2 * index + 1];
            v = (v &gt;&gt; 4) &amp; 0x0F;
            if (v != Math.abs(m)) &#123;
                d = 0;
            &#125; else &#123;
                d = 29;
                for (int i = 0; i &lt; bigLeapMonthYears.length; i++) &#123;
                    if (bigLeapMonthYears[i] == index) &#123;
                        d = 30;
                        break;
                    &#125;
                &#125;
            &#125;
        &#125;
        return d;
    &#125;

    public static int nextChineseMonth(int y, int m) &#123;
        int n = Math.abs(m) + 1;
        if (m &gt; 0) &#123;
            int index = y - baseChineseYear + baseIndex;
            int v = chineseMonths[2 * index + 1];
            v = (v &gt;&gt; 4) &amp; 0x0F;
            if (v == m)
                n = -m;
        &#125;
        if (n == 13)
            n = 1;
        return n;
    &#125;

    /**
     * 获取节气时间
     * 节气在本月的sectionalTerm号
     * 中气在本月的principleTerm号
     * @return
     */
    public int computeSolarTerms() &#123;
        if (gregorianYear &lt; 1901 || gregorianYear &gt; 2100)
            return 1;
        sectionalTerm = sectionalTerm(gregorianYear, gregorianMonth);
        principleTerm = principleTerm(gregorianYear, gregorianMonth);
        return 0;
    &#125;

    public static int sectionalTerm(int y, int m) &#123;
        if (y &lt; 1901 || y &gt; 2100)
            return 0;
        int index = 0;
        int ry = y - baseYear + 1;
        while (ry &gt;= sectionalTermYear[m - 1][index])
            index++;
        int term = sectionalTermMap[m - 1][4 * index + ry % 4];
        if ((ry == 121) &amp;&amp; (m == 4))
            term = 5;
        if ((ry == 132) &amp;&amp; (m == 4))
            term = 5;
        if ((ry == 194) &amp;&amp; (m == 6))
            term = 6;
        return term;
    &#125;

    public static int principleTerm(int y, int m) &#123;
        if (y &lt; 1901 || y &gt; 2100)
            return 0;
        int index = 0;
        int ry = y - baseYear + 1;
        while (ry &gt;= principleTermYear[m - 1][index])
            index++;
        int term = principleTermMap[m - 1][4 * index + ry % 4];
        if ((ry == 171) &amp;&amp; (m == 3))
            term = 21;
        if ((ry == 181) &amp;&amp; (m == 5))
            term = 21;
        return term;
    &#125;

    /**
     * 打印年历
     * @return
     */
    public String[] getYearTable() &#123;
        setGregorian(gregorianYear, 1, 1);
        computeChineseFields();
        computeSolarTerms();
        String[] table = new String[58]; // 6*9 + 4
        table[0] = &quot;\t公历年历：&quot; + gregorianYear;
        table[1] = &quot;\t农历年历：&quot; + (chineseYear + 1) + &quot; (&quot; + stemNames[(chineseYear + 1 - 1) % 10]
                + branchNames[(chineseYear + 1 - 1) % 12] + &quot; - &quot; + animalNames[(chineseYear + 1 - 1) % 12] + &quot;年)&quot;;
        int ln = 2;
        String blank = &quot;\t&quot;;
        String[] mLeft = null;
        String[] mRight = null;
        for (int i = 1; i &lt;= 6; i++) &#123;
            table[ln] = blank;
            ln++;
            mLeft = getMonthTable();
            mRight = getMonthTable();
            for (int j = 0; j &lt; mLeft.length; j++) &#123;
                String line = mLeft[j] + &quot;\t\t&quot; + mRight[j];
                table[ln] = line;
                ln++;
            &#125;
        &#125;
        table[ln] = blank;
        ln++;
        table[ln] = &quot;\t##/## - 公历日期/农历日期，(*)#月 - (闰)农历月第一天&quot;;
        ln++;
        return table;
    &#125;

    /**
     * 打印月历
     * @return
     */
    public String[] getMonthTable() &#123;
        setGregorian(gregorianYear, gregorianMonth, 1);
        computeChineseFields();
        computeSolarTerms();
        String[] table = new String[8];
        String title = &quot;\t\t\t\t&quot; + monthNames[gregorianMonth - 1] + &quot;月&quot; + &quot;\t\t\t\t&quot;;
        String header = &quot;\t      日\t      一\t      二\t      三\t      四\t      五\t      六\t&quot;;
        String blank = &quot;\t\t\t\t\t\t\t\t&quot;;
        table[0] = title;
        table[1] = header;
        int wk = 2;
        String line = &quot;\t&quot;;
        for (int i = 1; i &lt; dayOfWeek; i++) &#123;
            line += &quot;\t&quot;;
        &#125;
        int days = daysInGregorianMonth(gregorianYear, gregorianMonth);
        for (int i = gregorianDate; i &lt;= days; i++) &#123;
            line += getDateString() + &quot;\t&quot;;
            rollUpOneDay();
            if (dayOfWeek == 1) &#123;
                table[wk] = line;
                line = &quot;\t&quot;;
                wk++;
            &#125;
        &#125;
        for (int i = dayOfWeek; i &lt;= 7; i++) &#123;
            line += &quot;\t&quot;;
        &#125;
        table[wk] = line;
        for (int i = wk + 1; i &lt; table.length; i++) &#123;
            table[i] = blank;
        &#125;
        return table;
    &#125;

    /**
     * 打印当天日期
     * @return
     */
    public String getDateString() &#123;
        String str = &quot;*  /  &quot;;
        String gm = String.valueOf(gregorianMonth);
        if (gm.length() == 1)
            gm = &apos; &apos; + gm;
        String cm = String.valueOf(Math.abs(chineseMonth));
        if (cm.length() == 1)
            cm = &apos; &apos; + cm;
        String gd = String.valueOf(gregorianDate);
        if (gd.length() == 1)
            gd = &apos; &apos; + gd;
        if (gregorianDate == sectionalTerm) &#123;
            str = gd + &apos;/&apos; + &quot; &quot; + sectionalTermNames[(gregorianMonth+10)%12];
        &#125; else if (gregorianDate == principleTerm) &#123;
            str = gd + &apos;/&apos; + &quot; &quot; + principleTermNames[(gregorianMonth+10)%12];//节气是阳历月份分的每月2个，立春在2月份
        &#125; else if (chineseDate == 1 &amp;&amp; chineseMonth &gt; 0) &#123;
            str = gd + &apos;/&apos; + &quot; &quot; + monthOfAlmanac[Math.abs(chineseMonth) - 1];
        &#125; else if (chineseDate == 1 &amp;&amp; chineseMonth &lt; 0) &#123;// 闰月
            str = gd + &apos;/&apos; + &quot;*&quot; + monthOfAlmanac[Math.abs(chineseMonth) - 1];
        &#125; else &#123;
            str = gd + &quot;/ &quot; + daysOfAlmanac[chineseDate - 1];
        &#125;
        return str;
    &#125;

    public String getChinaDateString()&#123;
        String str = &quot;&quot;;
        String gm = String.valueOf(gregorianMonth);
        if (gm.length() == 1)
            gm = &apos; &apos; + gm;
        String cm = String.valueOf(Math.abs(chineseMonth));
        if (cm.length() == 1)
            cm = &apos; &apos; + cm;
        String gd = String.valueOf(gregorianDate);
        if (gd.length() == 1)
            gd = &apos; &apos; + gd;
        if (gregorianDate == sectionalTerm) &#123;
            str = sectionalTermNames[Math.abs(chineseMonth) - 1];
        &#125; else if (gregorianDate == principleTerm) &#123;
            str = principleTermNames[Math.abs(chineseMonth) - 1];
        &#125; else if (chineseDate == 1 &amp;&amp; chineseMonth &gt; 0) &#123;
            str = monthOfAlmanac[chineseMonth - 1];
        &#125; else if (chineseDate == 1 &amp;&amp; chineseMonth &lt; 0) &#123;// 闰月
            str = &quot;闰&quot;+monthOfAlmanac[-chineseMonth - 1];
        &#125; else &#123;
            str = daysOfAlmanac[chineseDate - 1];
        &#125;
        return str;
    &#125;

    /**
     * 将日期向后推移一天
     * @return
     */
    public int rollUpOneDay() &#123;
        dayOfWeek = dayOfWeek % 7 + 1;
        dayOfYear++;
        gregorianDate++;
        int days = daysInGregorianMonth(gregorianYear, gregorianMonth);
        if (gregorianDate &gt; days) &#123;
            gregorianDate = 1;
            gregorianMonth++;
            if (gregorianMonth &gt; 12) &#123;
                gregorianMonth = 1;
                gregorianYear++;
                dayOfYear = 1;
                isGregorianLeap = isGregorianLeapYear(gregorianYear);
            &#125;
            sectionalTerm = sectionalTerm(gregorianYear, gregorianMonth);
            principleTerm = principleTerm(gregorianYear, gregorianMonth);
        &#125;
        chineseDate++;
        days = daysInChineseMonth(chineseYear, chineseMonth);
        if (chineseDate &gt; days) &#123;
            chineseDate = 1;
            chineseMonth = nextChineseMonth(chineseYear, chineseMonth);
            if (chineseMonth == 1)
                chineseYear++;
        &#125;
        return 0;
    &#125;

    /**
     * 打印当前日期信息
     */
    public String toString() &#123;
        StringBuffer buf = new StringBuffer();
        buf.append(&quot;公元年Gregorian Year: \t&quot; + gregorianYear + &quot;年\n&quot;);
        buf.append(&quot;月Gregorian Month:  \t&quot; + gregorianMonth + &quot;月\n&quot;);
        buf.append(&quot;日Gregorian Date:  \t&quot; + gregorianDate + &quot;日\n&quot;);
        buf.append(&quot;闰年Is Leap Year:  \t&quot; + isGregorianLeap + &quot;\n&quot;);
        buf.append(&quot;一年 的第几天Day of Year:  \t第&quot; + dayOfYear + &quot;天\n&quot;);
        buf.append(&quot;星期几Day of Week:  \t&quot; + daysOfWeek[dayOfWeek - 1] + &quot;\n&quot;);
        buf.append(&quot;中国年Chinese Year:  \t&quot; + chineseYear + &quot;\n&quot;);
        buf.append(&quot;天干Heavenly Stem:  \t&quot; + stemNames[((chineseYear - 1) % 10)] + &quot;\n&quot;);
        buf.append(&quot;地支Earthly Branch: \t&quot; + branchNames[((chineseYear - 1) % 12)] + &quot;\n&quot;);
        buf.append(&quot;农历月Chinese Month: \t&quot; + monthOfAlmanac[chineseMonth - 1] + &quot;\n&quot;);
        buf.append(&quot;农历日Chinese Date:  \t&quot; + daysOfAlmanac[chineseDate - 1] + &quot;\n&quot;);
        buf.append(&quot;Sectional Term:  \t&quot; + sectionalTerm + &quot;日&quot; + sectionalTermNames[chineseMonth - 1] + &quot;\n&quot;);
        buf.append(&quot;Principle Term:  \t&quot; + principleTerm + &quot;日&quot; + principleTermNames[chineseMonth - 1] + &quot;\n&quot;);
        return buf.toString();
    &#125;

    public static void main(String[] arg) &#123;
        CalendarUtil c = new CalendarUtil();
        String cmd = &quot;year&quot;;
        Calendar cal = Calendar.getInstance();
        int y = 2048;//cal.get(Calendar.YEAR)-1;// 获取年份
        int m = cal.get(Calendar.MONTH) + 1;// 获取月份
        int d = cal.get(Calendar.DATE);// 获取日

        c.setGregorian(y, m, d);
        c.computeChineseFields();
        c.computeSolarTerms();

        if (cmd.equalsIgnoreCase(&quot;year&quot;)) &#123;
            String[] t = c.getYearTable();
            for (int i = 0; i &lt; t.length; i++)
                System.out.println(t[i]);
        &#125; else if (cmd.equalsIgnoreCase(&quot;month&quot;)) &#123;
            String[] t = c.getMonthTable();
            for (int i = 0; i &lt; t.length; i++)
                System.out.println(t[i]);
        &#125; else &#123;
            System.out.println(c.toString());
        &#125;
    &#125;






//    public int getGregorianYear() &#123;
//        return gregorianYear;
//    &#125;
//
//    public void setGregorianYear(int gregorianYear) &#123;
//        this.gregorianYear = gregorianYear;
//    &#125;
//
//    public int getGregorianMonth() &#123;
//        return gregorianMonth;
//    &#125;
//
//    public void setGregorianMonth(int gregorianMonth) &#123;
//        this.gregorianMonth = gregorianMonth;
//    &#125;
//
//    public int getGregorianDate() &#123;
//        return gregorianDate;
//    &#125;
//
//    public void setGregorianDate(int gregorianDate) &#123;
//        this.gregorianDate = gregorianDate;
//    &#125;
//
//    public boolean isGregorianLeap() &#123;
//        return isGregorianLeap;
//    &#125;
//
//    public void setGregorianLeap(boolean isGregorianLeap) &#123;
//        this.isGregorianLeap = isGregorianLeap;
//    &#125;
//
//    public int getDayOfYear() &#123;
//        return dayOfYear;
//    &#125;
//
//    public void setDayOfYear(int dayOfYear) &#123;
//        this.dayOfYear = dayOfYear;
//    &#125;
//
//    public int getDayOfWeek() &#123;
//        return dayOfWeek;
//    &#125;
//
//    public void setDayOfWeek(int dayOfWeek) &#123;
//        this.dayOfWeek = dayOfWeek;
//    &#125;
//
//    public int getChineseYear() &#123;
//        return chineseYear;
//    &#125;
//
//    public void setChineseYear(int chineseYear) &#123;
//        this.chineseYear = chineseYear;
//    &#125;

    public int getChineseMonth() &#123;
        return chineseMonth;
    &#125;

    public void setChineseMonth(int chineseMonth) &#123;
        this.chineseMonth = chineseMonth;
    &#125;

    public int getChineseDate() &#123;
        return chineseDate;
    &#125;

    public void setChineseDate(int chineseDate) &#123;
        this.chineseDate = chineseDate;
    &#125;
//
//    public int getSectionalTerm() &#123;
//        return sectionalTerm;
//    &#125;
//
//    public void setSectionalTerm(int sectionalTerm) &#123;
//        this.sectionalTerm = sectionalTerm;
//    &#125;
//
//    public int getPrincipleTerm() &#123;
//        return principleTerm;
//    &#125;
//
//    public void setPrincipleTerm(int principleTerm) &#123;
//        this.principleTerm = principleTerm;
//    &#125;
//
//    public static char[] getDaysInGregorianMonth() &#123;
//        return daysInGregorianMonth;
//    &#125;
//
//    public static void setDaysInGregorianMonth(char[] daysInGregorianMonth) &#123;
//        CalendarUtil.daysInGregorianMonth = daysInGregorianMonth;
//    &#125;
//
//    public static String[] getStemNames() &#123;
//        return stemNames;
//    &#125;
//
//    public static void setStemNames(String[] stemNames) &#123;
//        CalendarUtil.stemNames = stemNames;
//    &#125;
//
//    public static String[] getBranchNames() &#123;
//        return branchNames;
//    &#125;
//
//    public static void setBranchNames(String[] branchNames) &#123;
//        CalendarUtil.branchNames = branchNames;
//    &#125;
//
//    public static String[] getAnimalNames() &#123;
//        return animalNames;
//    &#125;
//
//    public static void setAnimalNames(String[] animalNames) &#123;
//        CalendarUtil.animalNames = animalNames;
//    &#125;
//
//    public static char[] getChineseMonths() &#123;
//        return chineseMonths;
//    &#125;
//
//    public static void setChineseMonths(char[] chineseMonths) &#123;
//        CalendarUtil.chineseMonths = chineseMonths;
//    &#125;
//
//    public static int getBaseYear() &#123;
//        return baseYear;
//    &#125;
//
//    public static void setBaseYear(int baseYear) &#123;
//        CalendarUtil.baseYear = baseYear;
//    &#125;
//
//    public static int getBaseMonth() &#123;
//        return baseMonth;
//    &#125;
//
//    public static void setBaseMonth(int baseMonth) &#123;
//        CalendarUtil.baseMonth = baseMonth;
//    &#125;
//
//    public static int getBaseDate() &#123;
//        return baseDate;
//    &#125;
//
//    public static void setBaseDate(int baseDate) &#123;
//        CalendarUtil.baseDate = baseDate;
//    &#125;
//
//    public static int getBaseIndex() &#123;
//        return baseIndex;
//    &#125;
//
//    public static void setBaseIndex(int baseIndex) &#123;
//        CalendarUtil.baseIndex = baseIndex;
//    &#125;
//
//    public static int getBaseChineseYear() &#123;
//        return baseChineseYear;
//    &#125;
//
//    public static void setBaseChineseYear(int baseChineseYear) &#123;
//        CalendarUtil.baseChineseYear = baseChineseYear;
//    &#125;
//
//    public static int getBaseChineseMonth() &#123;
//        return baseChineseMonth;
//    &#125;
//
//    public static void setBaseChineseMonth(int baseChineseMonth) &#123;
//        CalendarUtil.baseChineseMonth = baseChineseMonth;
//    &#125;
//
//    public static int getBaseChineseDate() &#123;
//        return baseChineseDate;
//    &#125;
//
//    public static void setBaseChineseDate(int baseChineseDate) &#123;
//        CalendarUtil.baseChineseDate = baseChineseDate;
//    &#125;
//
//    public static int[] getBigLeapMonthYears() &#123;
//        return bigLeapMonthYears;
//    &#125;
//
//    public static void setBigLeapMonthYears(int[] bigLeapMonthYears) &#123;
//        CalendarUtil.bigLeapMonthYears = bigLeapMonthYears;
//    &#125;
//
//    public static char[][] getSectionalTermMap() &#123;
//        return sectionalTermMap;
//    &#125;
//
//    public static void setSectionalTermMap(char[][] sectionalTermMap) &#123;
//        CalendarUtil.sectionalTermMap = sectionalTermMap;
//    &#125;
//
//    public static char[][] getSectionalTermYear() &#123;
//        return sectionalTermYear;
//    &#125;
//
//    public static void setSectionalTermYear(char[][] sectionalTermYear) &#123;
//        CalendarUtil.sectionalTermYear = sectionalTermYear;
//    &#125;
//
//    public static char[][] getPrincipleTermMap() &#123;
//        return principleTermMap;
//    &#125;
//
//    public static void setPrincipleTermMap(char[][] principleTermMap) &#123;
//        CalendarUtil.principleTermMap = principleTermMap;
//    &#125;
//
//    public static char[][] getPrincipleTermYear() &#123;
//        return principleTermYear;
//    &#125;
//
//    public static void setPrincipleTermYear(char[][] principleTermYear) &#123;
//        CalendarUtil.principleTermYear = principleTermYear;
//    &#125;
//
//    public static String[] getMonthNames() &#123;
//        return monthNames;
//    &#125;
//
//    public static void setMonthNames(String[] monthNames) &#123;
//        CalendarUtil.monthNames = monthNames;
//    &#125;
//
//    public static String[] getPrincipleTermNames() &#123;
//        return principleTermNames;
//    &#125;
//
//    public static void setPrincipleTermNames(String[] principleTermNames) &#123;
//        CalendarUtil.principleTermNames = principleTermNames;
//    &#125;
//
//    public static String[] getSectionalTermNames() &#123;
//        return sectionalTermNames;
//    &#125;
//
//    public static void setSectionalTermNames(String[] sectionalTermNames) &#123;
//        CalendarUtil.sectionalTermNames = sectionalTermNames;
//    &#125;
&#125;
</code></pre><h2 id="在日历的菜单中添加“显示农历”选项"><a href="#在日历的菜单中添加“显示农历”选项" class="headerlink" title="在日历的菜单中添加“显示农历”选项"></a>在日历的菜单中添加“显示农历”选项</h2><p>在Calander源码中的AllInOneActivity.java中的OnCreateOption中添加   </p>
<pre><code>//添加菜单选项
meunItem=menu.findItem(R.id.show_chineseDate);  
nemuItem.setTitle((Utils.getSharedPrefersence(this,&quot;show_chineseDate&quot;,false)?R.string.show_chinesedate_true:R.String.show_chinesedate_false));    
</code></pre><p>在OnOptionsItemSetected(meunItem item)中添加  </p>
<pre><code>else if(itemId == R.id.show_chinesedate)&#123;
  Utils.setSharedPreference(this,&quot;show_chinesedate&quot;,(Utils.getSharedPreference(this,&quot;show_chinesedate&quot;,false)?false:true));//保存状态
  MenuItem menuItem = mOptionsMenu.findItem(R.id.show_chinesedate);
  menuItem.setTitle(Utils.getSharedPreference(this,&quot;show_chinesedate&quot;,false)?R.string.show_chinesedate_true:R.string.show_chinesedate_false);//更新菜单显示
  initFragments(mController.getTime(), mController.getViewType(), null);//刷新页面显示
  return true;
&#125;
</code></pre><p>在这之前我们必须要添加必要的xml文件中添加资源比如：menu中All_in_one_bar.xml中添加   </p>
<pre><code>&lt;item
    android:id=&quot;@+id/show_chainesedate&quot;
    android:alphabeticShortcut=&quot;s&quot;
    android:title=&quot;@string/show_chinesedate_false&quot;
    android:icon=&quot;@drawable/ic_menu_settings_holo_light&quot;
    android:showAsAction=&quot;never&quot;------------------------------------这里是配置是否在标题栏中显示图标
    android:orderInCategory=&quot;11&quot;/&gt;
</code></pre><p>还有在values文件夹下的string中添加show_chinesedate_true、show_chinesedate_false</p>
<blockquote>
<p>1、这里必须注意：添加string时必须要在values中添加对应的值，不能只在values_zh中添加，不然当你切换语言时程序会找不到对应string报错<br>2、还有一点就是在menu中添加选项也必须在menu_land文件中添加对应的，不然当程序却换为横屏显示时会因为找不到选项而报错  </p>
</blockquote>
<h2 id="在日历的月份视图中添加农历显示"><a href="#在日历的月份视图中添加农历显示" class="headerlink" title="在日历的月份视图中添加农历显示"></a>在日历的月份视图中添加农历显示</h2><p>在SimpleWeekView.java中的构造方法中读取SharedPreference  </p>
<pre><code>show_chinesedate_flag=Utils.getSharedPreference(context,&quot;show_chinesedate&quot;,true);      
</code></pre><p>在setWeekParams方法中修改原有代码为  </p>
<pre><code>if(show_chinesedate_flag)&#123;
  mDayNumbers[i] = Integer.toString(time.monthDay++)+
    &quot;\n&quot;+new CalendarUtil(time.year,time.month+1,time.monthDay-1).getChinaDateString();
&#125;else&#123;
  mDayNumbers[i] = Integer.toString(time.monthDay++);
&#125;
</code></pre><h1 id="改变日历图标"><a href="#改变日历图标" class="headerlink" title="改变日历图标"></a>改变日历图标</h1><h2 id="找寻icon素材"><a href="#找寻icon素材" class="headerlink" title="找寻icon素材"></a>找寻icon素材</h2><p>在主题包中有大量的手机icon在网上搜索并下载后按教程解压即可<br>还有就是可以通过相关网站获取<a target="_blank" rel="noopener" href="http://www.iconfont.cn/">iconfont</a>、 <a target="_blank" rel="noopener" href="http://www.easyicon.net/">easyicon</a></p>
<h2 id="修改Launcher3源码获取素材并显示"><a href="#修改Launcher3源码获取素材并显示" class="headerlink" title="修改Launcher3源码获取素材并显示"></a>修改Launcher3源码获取素材并显示</h2><p>参考文章：<a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/JreiUn">android launcher 日历图标显示日期</a><br>基本参考上文，createCalendarIconBitmap方法做了部分修改，实现跨应用读取图片并拼合图片</p>
<pre><code>static Bitmap createCalendarIconBitmap(Drawable icon, Context context)&#123;
  Context calendarContext=null;
  try&#123;
    calendarContext=context.createPackageContext(&quot;com.android.calendar&quot;,Context.CONTEXT_IGNORE_SECURITY);//获得日历的Context
  &#125;catch(NameNotFoundException e)&#123;
    System.out.println(&quot;not found package \&quot;com.android.calendar\&quot;&quot;);
  &#125;
  Bitmap calendarIcon = createIconBitmap(icon,context);
  Drawable drawable_1 =getCalendarIcon_date(calendarContext);
  Drawable drawable_2 =getCalendarIcon_week(calendarContext);
  calendarIcon=((BitmapDrawable)drawable_1).getBitmap();
  Bitmap calendarIcon_week=((BitmapDrawable)drawable_2).getBitmap();
  synchronized (sCanvas) &#123;
    if (!calendarIcon.isMutable()) &#123;
      calendarIcon = calendarIcon.copy(Bitmap.Config.ARGB_8888, true);
    &#125;
    Paint paint = new Paint();
    Canvas canvas = new Canvas(calendarIcon);
    canvas.drawBitmap(calendarIcon_week, 0, 0, paint);
    canvas.save(Canvas.ALL_SAVE_FLAG);
    canvas.restore();
    return calendarIcon;
  &#125;
&#125;

static Drawable getCalendarIcon_date(Context calendarContext)&#123;
  Resources resources=calendarContext.getResources();
  int identify = resources.getIdentifier( calendarContext.getPackageName()+&quot;:mipmap/&quot;+&quot;calendar&quot;+String.valueOf(Calendar.getInstance().get(Calendar.DAY_OF_MONTH)) , null , null );//获得图片的资源id，如果图片不存在会返回“0”
  return resources.getDrawable(identify);
&#125;

static Drawable getCalendarIcon_week(Context calendarContext)&#123;
  Resources resources=calendarContext.getResources();
  int identify;
  if(calendarContext.getResources().getConfiguration().locale.getCountry().equals(&quot;CN&quot;))&#123;
    identify=resources.getIdentifier(calendarContext.getPackageName()+&quot;:mipmap/&quot;+&quot;day&quot;+String.valueOf(Calendar.getInstance().get(Calendar.DAY_OF_MONTH))+&quot;_ch&quot;,null,null);
  &#125;else&#123;
    identify=resources.getIdentifier(calendarContext.getPackageName()+&quot;:mipmap/&quot;+&quot;day&quot;+String.valueOf(Calendar.getInstance().get(Calendar.DAY_OF_MONTH))+&quot;_en&quot;,null,null);
  &#125;
  return resources.getDrawable(identify);
&#125;
</code></pre><p>实现的效果是<br>图片素材<br><img src="http://jxust-cgs.github.io/photos/calendar_sucai.png" alt="效果"><br>实现效果<br><img src="http://jxust-cgs.github.io/photos/calendar_logo.png" alt="素材">   </p>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2016/04/29/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%885%EF%BC%89%E2%80%94%E2%80%94%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" style="float: left">
        ← android学习笔记（5） ——文件操作
    </a>
    
    
    <a class="pull-right" href="/2016/04/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
        正则表达式 →
    </a>
    
	<br>
</nav>

        <br>
	<div class="row col-md-offset-2">
            <div class="col-md-8">
    			<div class="wumi">
</div>
            </div>
        </div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By Jxust_CGS. All Rights Reserved.<br>
					<span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
					<span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次</span><br>
                </p>
                <p>Theme By <a target="_blank" rel="noopener" href="//go.kieran.top" style="color: #767D84">Kieran</a></p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/jxust-CGS" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    
                    
                    
                    <li><a href="http://weibo.com/jxustCGS" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      (function(){
        console.log('font');
        var getCss = function(path) {
          var head = document.getElementsByTagName('head')[0];
          link = document.createElement('link');
          link.href = path;
          link.rel = 'stylesheet';
          link.type = 'text/css';
          head.appendChild(link);
        };
        getCss('https://fonts.googleapis.com/css?family=Montserrat:400,700');
        getCss('https://fonts.googleapis.com/css?family=Open+Sans:400,600');
      })();
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>
</div></body>
</html>