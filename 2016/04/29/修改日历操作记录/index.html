<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>android源码修改（1） ——日历中显示农历、日历图标随时间改变 | 极光轨迹</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="极光轨迹">
    
    <meta name="author" content="Jxust_CGS">
    
    <meta name="description" itemprop="description" content="记录老师布置的小练习之修改android源码中的日历，为日历添加农历显示选项和让日历的图标随日期更改">
    
	
	<meta name="Keywords" content="android源码,日历,农历,安卓">
    

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="极光轨迹" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">

    

    <!-- Custom stylesheet, (add custom styles here, always load last) -->
    <!-- Load our stylesheet for IE8 -->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- Google Webfonts (Monserrat 400/700, Open Sans 400/600) -->
    <link href='//fonts.css.network/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link href='//fonts.css.network/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>

    <!-- Load our fonts individually if IE8+, to avoid faux bold & italic rendering -->
    <!--[if IE]>
    <link href='http://fonts.css.network/css?family=Montserrat:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.css.network/css?family=Montserrat:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.css.network/css?family=Open+Sans:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.css.network/css?family=Open+Sans:600' rel='stylesheet' type='text/css'>
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->










  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="atom.xml">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml">
  
  

  
  <script src="/js/busuanzi.pure.mini.js"></script>
  <script src="/js/lufei.js"></script>
  <isindex prompt="this is index" />
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">
	  <!-- ============================ START lufei =========================== -->
		<div id="xiaoren" class="xiaoren">
			<div id="message">正在加载中……</div>
			<div id="lufei" class="lufei"></div>
		</div>
	  <!-- ============================ END lufei =========================== -->
      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">首页</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">文章</a></li>
            <!-- Dropdown Menu -->
            
        	<li>
        		<a class="sb-toggle-submenu">分类<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/Hibernate/" class="animsition-link">Hibernate<small>(6)</small></a></li>
				    
				    <li><a href="/categories/Java/" class="animsition-link">Java<small>(1)</small></a></li>
				    
				    <li><a href="/categories/Spring/" class="animsition-link">Spring<small>(4)</small></a></li>
				    
				    <li><a href="/categories/android/" class="animsition-link">android<small>(12)</small></a></li>
				    
				    <li><a href="/categories/android源码/" class="animsition-link">android源码<small>(2)</small></a></li>
				    
				    <li><a href="/categories/git/" class="animsition-link">git<small>(1)</small></a></li>
				    
				    <li><a href="/categories/linux/" class="animsition-link">linux<small>(1)</small></a></li>
				    
				    <li><a href="/categories/python/" class="animsition-link">python<small>(1)</small></a></li>
				    
				    <li><a href="/categories/web/" class="animsition-link">web<small>(2)</small></a></li>
				    
				    <li><a href="/categories/杂谈/" class="animsition-link">杂谈<small>(1)</small></a></li>
				    
				    <li><a href="/categories/正则表达式/" class="animsition-link">正则表达式<small>(1)</small></a></li>
				    
				    <li><a href="/categories/设计模式/" class="animsition-link">设计模式<small>(1)</small></a></li>
				    
				</ul>
        	</li>
			
			
        	<li>
        		<a class="sb-toggle-submenu">标签<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/tags/Hibernate/" class="animsition-link">Hibernate<small>(6)</small></a></li>
				    
				    <li><a href="/tags/Json/" class="animsition-link">Json<small>(1)</small></a></li>
				    
				    <li><a href="/tags/Spring/" class="animsition-link">Spring<small>(4)</small></a></li>
				    
				    <li><a href="/tags/android/" class="animsition-link">android<small>(11)</small></a></li>
				    
				    <li><a href="/tags/android源码/" class="animsition-link">android源码<small>(3)</small></a></li>
				    
				    <li><a href="/tags/bootstrap/" class="animsition-link">bootstrap<small>(2)</small></a></li>
				    
				    <li><a href="/tags/first/" class="animsition-link">first<small>(1)</small></a></li>
				    
				    <li><a href="/tags/git/" class="animsition-link">git<small>(1)</small></a></li>
				    
				    <li><a href="/tags/linux/" class="animsition-link">linux<small>(1)</small></a></li>
				    
				    <li><a href="/tags/selenium/" class="animsition-link">selenium<small>(1)</small></a></li>
				    
				    <li><a href="/tags/正则表达式/" class="animsition-link">正则表达式<small>(1)</small></a></li>
				    
				    <li><a href="/tags/设计模式/" class="animsition-link">设计模式<small>(1)</small></a></li>
				    
				</ul>
        	</li>
			
			
            <li>
                <a class="sb-toggle-submenu">其他<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="/links" target="_BLANK" class="animsition-link">导航</a></li>
                    
                </ul>
            </li>
            
            
            <li>
                <a class="sb-toggle-submenu">友情链接<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://ykzhai.top/" class="animsition-link">砦龑堃</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/curriculumvitae" class="animsition-link" title="about">关于</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.png" alt="Logo" width="35px;"/> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">极光轨迹</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/jxust-CGS" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            
                            
                            
                            <li><a href="http://weibo.com/jxustCGS" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">更多</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

        <!-- ============================ Hero Image =========================== -->

        <section id="hero" class="scrollme">
            <div class="container-fluid element-img" style="background: url(/img/1.jpg) repeat center  fixed">
                <div class="row">
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2 vertical-align cover boost text-center">
                        <div class="center-me animateme" data-when="exit" data-from="0" data-to="0.6" data-opacity="0" data-translatey="100">
                            <div>
                            	
                                <h2>ON THE WAY TO MEET YOU, I NO LONGER LONELY, WELCOME.</h2><br/>
                                <p></p>
				    			
                                <h2></h2><br/>
                                <p>往昔的努力不可辜负，憧憬的未来不可辜负。</p>
				    			

                            </div>
                        </div>
                    </div>
                    <!-- // .col-md-12 -->
                </div>
                <div class="herofade beige-dk"></div>
            </div>
        </section>

        <!-- Height spacing helper -->
        <div class="heightblock"></div>
        <!-- // End height spacing helper -->

        <!-- ============================ END Hero Image =========================== -->
      
<section id="intro">
    <div class="container">
		<div class="row col-md-offset-2">
            <div class="col-md-8">
                <h1>android源码修改（1） ——日历中显示农历、日历图标随时间改变</h1>
				<span class="post-meta">
      <time datetime="2016-04-29T03:36:00.000Z" itemprop="datePublished">
          2016-04-29
      </time>
	
    
    | 分类：
    <a class="categories" href='/categories/android源码/'>android源码</a>
    
    
    
    
    | 标签：
    <a class="tags" href='/tags/android源码/'>android源码</a>
    
    
</span>
				<br/>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h1 id="显示农历">显示农历</h1><h2 id="写出公历与农历的转换函数">写出公历与农历的转换函数</h2><p>参考文章：<a href="http://blog.csdn.net/liangguo03/article/details/7097388" target="_blank" rel="external">日历农历算法</a><br>算法由参考文章中获得，不过我有点强迫症看着算法是对的,美中不足是输出格式不是很好，必须修改修改^_^  </p>
<pre><code><span class="keyword">package</span> main;
<span class="keyword">import</span> java.util.Calendar;
<span class="comment">/**
 * ChineseCalendarGB.java Copyright (c) 1997-2002 by Dr. Herong Yang 中国农历算法 -
 * 实用于公历 1901 年至 2100 年之间的 200 年
 */</span>
<span class="keyword">public</span> class CalendarUtil {
    <span class="keyword">private</span> <span class="built_in">int</span> gregorianYear;
    <span class="keyword">private</span> <span class="built_in">int</span> gregorianMonth;
    <span class="keyword">private</span> <span class="built_in">int</span> gregorianDate;
    <span class="keyword">private</span> <span class="built_in">boolean</span> isGregorianLeap;
    <span class="keyword">private</span> <span class="built_in">int</span> dayOfYear;
    <span class="keyword">private</span> <span class="built_in">int</span> dayOfWeek; <span class="comment">// 周日一星期的第一天</span>
    <span class="keyword">private</span> <span class="built_in">int</span> chineseYear;
    <span class="keyword">private</span> <span class="built_in">int</span> chineseMonth; <span class="comment">// 负数表示闰月</span>
    <span class="keyword">private</span> <span class="built_in">int</span> chineseDate;
    <span class="keyword">private</span> <span class="built_in">int</span> sectionalTerm;<span class="comment">// 本月节气的日期</span>
    <span class="keyword">private</span> <span class="built_in">int</span> principleTerm;<span class="comment">// 本月中气的日期</span>
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">char</span>[] daysInGregorianMonth = { <span class="number">31</span>, <span class="number">28</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span> };
    <span class="comment">// 天干</span>
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span>[] stemNames = { <span class="string">"甲"</span>, <span class="string">"乙"</span>, <span class="string">"丙"</span>, <span class="string">"丁"</span>, <span class="string">"戊"</span>, <span class="string">"己"</span>, <span class="string">"庚"</span>, <span class="string">"辛"</span>, <span class="string">"壬"</span>, <span class="string">"癸"</span> };
    <span class="comment">// 地支</span>
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span>[] branchNames = { <span class="string">"子"</span>, <span class="string">"丑"</span>, <span class="string">"寅"</span>, <span class="string">"卯"</span>, <span class="string">"辰"</span>, <span class="string">"巳"</span>, <span class="string">"午"</span>, <span class="string">"未"</span>, <span class="string">"申"</span>, <span class="string">"酉"</span>, <span class="string">"戌"</span>, <span class="string">"亥"</span> };

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span>[] animalNames = { <span class="string">"鼠"</span>, <span class="string">"牛"</span>, <span class="string">"虎"</span>, <span class="string">"兔"</span>, <span class="string">"龙"</span>, <span class="string">"蛇"</span>, <span class="string">"马"</span>, <span class="string">"羊"</span>, <span class="string">"猴"</span>, <span class="string">"鸡"</span>, <span class="string">"狗"</span>, <span class="string">"猪"</span> };

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span>[] daysOfWeek = { <span class="string">"星期日"</span>, <span class="string">"星期一"</span>, <span class="string">"星期二"</span>, <span class="string">"星期三"</span>, <span class="string">"星期四"</span>, <span class="string">"星期五"</span>, <span class="string">"星期六"</span> };

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span>[] monthOfAlmanac = { <span class="string">"正月"</span>, <span class="string">"二月"</span>, <span class="string">"三月"</span>, <span class="string">"四月"</span>, <span class="string">"五月"</span>, <span class="string">"六月"</span>, <span class="string">"七月"</span>, <span class="string">"八月"</span>, <span class="string">"九月"</span>, <span class="string">"十月"</span>, <span class="string">"冬月"</span>, <span class="string">"腊月"</span> };
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span>[] monthNames = { <span class="string">"一"</span>, <span class="string">"二"</span>, <span class="string">"三"</span>, <span class="string">"四"</span>, <span class="string">"五"</span>, <span class="string">"六"</span>, <span class="string">"七"</span>, <span class="string">"八"</span>, <span class="string">"九"</span>, <span class="string">"十"</span>, <span class="string">"十一"</span>, <span class="string">"十二"</span> };

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span>[] daysOfAlmanac = { <span class="string">"初一"</span>, <span class="string">"初二"</span>, <span class="string">"初三"</span>, <span class="string">"初四"</span>, <span class="string">"初五"</span>, <span class="string">"初六"</span>, <span class="string">"初七"</span>, <span class="string">"初八"</span>, <span class="string">"初九"</span>, <span class="string">"初十"</span>, <span class="string">"十一"</span>, <span class="string">"十二"</span>,
            <span class="string">"十三"</span>, <span class="string">"十四"</span>, <span class="string">"十五"</span>, <span class="string">"十六"</span>, <span class="string">"十七"</span>, <span class="string">"十八"</span>, <span class="string">"十九"</span>, <span class="string">"二十"</span>, <span class="string">"廿一"</span>, <span class="string">"廿二"</span>, <span class="string">"廿三"</span>, <span class="string">"廿四"</span>, <span class="string">"廿五"</span>, <span class="string">"廿六"</span>, <span class="string">"廿七"</span>, <span class="string">"廿八"</span>, <span class="string">"廿九"</span>,
            <span class="string">"三十"</span> }; <span class="comment">// 农历的天数</span>

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span>[] principleTermNames = { <span class="string">"雨水"</span>, <span class="string">"春分"</span>, <span class="string">"谷雨"</span>, <span class="string">"夏满"</span>, <span class="string">"夏至"</span>, <span class="string">"大暑"</span>, <span class="string">"处暑"</span>, <span class="string">"秋分"</span>, <span class="string">"霜降"</span>, <span class="string">"小雪"</span>, <span class="string">"冬至"</span>,
            <span class="string">"大寒"</span> };

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span>[] sectionalTermNames = { <span class="string">"立春"</span>, <span class="string">"惊蛰"</span>, <span class="string">"清明"</span>, <span class="string">"立夏"</span>, <span class="string">"芒种"</span>, <span class="string">"小暑"</span>, <span class="string">"立秋"</span>, <span class="string">"白露"</span>, <span class="string">"寒露"</span>, <span class="string">"立冬"</span>, <span class="string">"大雪"</span>,
            <span class="string">"小寒"</span> };

    <span class="comment">// 农历月份大小压缩表，两个字节表示一年。两个字节共十六个二进制位数，</span>
    <span class="comment">// 前四个位数表示闰月月份，后十二个位数表示十二个农历月份的大小。</span>
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">char</span>[] chineseMonths = { <span class="number">0x00</span>, <span class="number">0x04</span>, <span class="number">0xad</span>, <span class="number">0x08</span>, <span class="number">0x5a</span>, <span class="number">0x01</span>, <span class="number">0xd5</span>, <span class="number">0x54</span>, <span class="number">0xb4</span>, <span class="number">0x09</span>, <span class="number">0x64</span>, <span class="number">0x05</span>,
            <span class="number">0x59</span>, <span class="number">0x45</span>, <span class="number">0x95</span>, <span class="number">0x0a</span>, <span class="number">0xa6</span>, <span class="number">0x04</span>, <span class="number">0x55</span>, <span class="number">0x24</span>, <span class="number">0xad</span>, <span class="number">0x08</span>, <span class="number">0x5a</span>, <span class="number">0x62</span>, <span class="number">0xda</span>, <span class="number">0x04</span>, <span class="number">0xb4</span>, <span class="number">0x05</span>, <span class="number">0xb4</span>, <span class="number">0x55</span>,
            <span class="number">0x52</span>, <span class="number">0x0d</span>, <span class="number">0x94</span>, <span class="number">0x0a</span>, <span class="number">0x4a</span>, <span class="number">0x2a</span>, <span class="number">0x56</span>, <span class="number">0x02</span>, <span class="number">0x6d</span>, <span class="number">0x71</span>, <span class="number">0x6d</span>, <span class="number">0x01</span>, <span class="number">0xda</span>, <span class="number">0x02</span>, <span class="number">0xd2</span>, <span class="number">0x52</span>, <span class="number">0xa9</span>, <span class="number">0x05</span>,
            <span class="number">0x49</span>, <span class="number">0x0d</span>, <span class="number">0x2a</span>, <span class="number">0x45</span>, <span class="number">0x2b</span>, <span class="number">0x09</span>, <span class="number">0x56</span>, <span class="number">0x01</span>, <span class="number">0xb5</span>, <span class="number">0x20</span>, <span class="number">0x6d</span>, <span class="number">0x01</span>, <span class="number">0x59</span>, <span class="number">0x69</span>, <span class="number">0xd4</span>, <span class="number">0x0a</span>, <span class="number">0xa8</span>, <span class="number">0x05</span>,
            <span class="number">0xa9</span>, <span class="number">0x56</span>, <span class="number">0xa5</span>, <span class="number">0x04</span>, <span class="number">0x2b</span>, <span class="number">0x09</span>, <span class="number">0x9e</span>, <span class="number">0x38</span>, <span class="number">0xb6</span>, <span class="number">0x08</span>, <span class="number">0xec</span>, <span class="number">0x74</span>, <span class="number">0x6c</span>, <span class="number">0x05</span>, <span class="number">0xd4</span>, <span class="number">0x0a</span>, <span class="number">0xe4</span>, <span class="number">0x6a</span>,
            <span class="number">0x52</span>, <span class="number">0x05</span>, <span class="number">0x95</span>, <span class="number">0x0a</span>, <span class="number">0x5a</span>, <span class="number">0x42</span>, <span class="number">0x5b</span>, <span class="number">0x04</span>, <span class="number">0xb6</span>, <span class="number">0x04</span>, <span class="number">0xb4</span>, <span class="number">0x22</span>, <span class="number">0x6a</span>, <span class="number">0x05</span>, <span class="number">0x52</span>, <span class="number">0x75</span>, <span class="number">0xc9</span>, <span class="number">0x0a</span>,
            <span class="number">0x52</span>, <span class="number">0x05</span>, <span class="number">0x35</span>, <span class="number">0x55</span>, <span class="number">0x4d</span>, <span class="number">0x0a</span>, <span class="number">0x5a</span>, <span class="number">0x02</span>, <span class="number">0x5d</span>, <span class="number">0x31</span>, <span class="number">0xb5</span>, <span class="number">0x02</span>, <span class="number">0x6a</span>, <span class="number">0x8a</span>, <span class="number">0x68</span>, <span class="number">0x05</span>, <span class="number">0xa9</span>, <span class="number">0x0a</span>,
            <span class="number">0x8a</span>, <span class="number">0x6a</span>, <span class="number">0x2a</span>, <span class="number">0x05</span>, <span class="number">0x2d</span>, <span class="number">0x09</span>, <span class="number">0xaa</span>, <span class="number">0x48</span>, <span class="number">0x5a</span>, <span class="number">0x01</span>, <span class="number">0xb5</span>, <span class="number">0x09</span>, <span class="number">0xb0</span>, <span class="number">0x39</span>, <span class="number">0x64</span>, <span class="number">0x05</span>, <span class="number">0x25</span>, <span class="number">0x75</span>,
            <span class="number">0x95</span>, <span class="number">0x0a</span>, <span class="number">0x96</span>, <span class="number">0x04</span>, <span class="number">0x4d</span>, <span class="number">0x54</span>, <span class="number">0xad</span>, <span class="number">0x04</span>, <span class="number">0xda</span>, <span class="number">0x04</span>, <span class="number">0xd4</span>, <span class="number">0x44</span>, <span class="number">0xb4</span>, <span class="number">0x05</span>, <span class="number">0x54</span>, <span class="number">0x85</span>, <span class="number">0x52</span>, <span class="number">0x0d</span>,
            <span class="number">0x92</span>, <span class="number">0x0a</span>, <span class="number">0x56</span>, <span class="number">0x6a</span>, <span class="number">0x56</span>, <span class="number">0x02</span>, <span class="number">0x6d</span>, <span class="number">0x02</span>, <span class="number">0x6a</span>, <span class="number">0x41</span>, <span class="number">0xda</span>, <span class="number">0x02</span>, <span class="number">0xb2</span>, <span class="number">0xa1</span>, <span class="number">0xa9</span>, <span class="number">0x05</span>, <span class="number">0x49</span>, <span class="number">0x0d</span>,
            <span class="number">0x0a</span>, <span class="number">0x6d</span>, <span class="number">0x2a</span>, <span class="number">0x09</span>, <span class="number">0x56</span>, <span class="number">0x01</span>, <span class="number">0xad</span>, <span class="number">0x50</span>, <span class="number">0x6d</span>, <span class="number">0x01</span>, <span class="number">0xd9</span>, <span class="number">0x02</span>, <span class="number">0xd1</span>, <span class="number">0x3a</span>, <span class="number">0xa8</span>, <span class="number">0x05</span>, <span class="number">0x29</span>, <span class="number">0x85</span>,
            <span class="number">0xa5</span>, <span class="number">0x0c</span>, <span class="number">0x2a</span>, <span class="number">0x09</span>, <span class="number">0x96</span>, <span class="number">0x54</span>, <span class="number">0xb6</span>, <span class="number">0x08</span>, <span class="number">0x6c</span>, <span class="number">0x09</span>, <span class="number">0x64</span>, <span class="number">0x45</span>, <span class="number">0xd4</span>, <span class="number">0x0a</span>, <span class="number">0xa4</span>, <span class="number">0x05</span>, <span class="number">0x51</span>, <span class="number">0x25</span>,
            <span class="number">0x95</span>, <span class="number">0x0a</span>, <span class="number">0x2a</span>, <span class="number">0x72</span>, <span class="number">0x5b</span>, <span class="number">0x04</span>, <span class="number">0xb6</span>, <span class="number">0x04</span>, <span class="number">0xac</span>, <span class="number">0x52</span>, <span class="number">0x6a</span>, <span class="number">0x05</span>, <span class="number">0xd2</span>, <span class="number">0x0a</span>, <span class="number">0xa2</span>, <span class="number">0x4a</span>, <span class="number">0x4a</span>, <span class="number">0x05</span>,
            <span class="number">0x55</span>, <span class="number">0x94</span>, <span class="number">0x2d</span>, <span class="number">0x0a</span>, <span class="number">0x5a</span>, <span class="number">0x02</span>, <span class="number">0x75</span>, <span class="number">0x61</span>, <span class="number">0xb5</span>, <span class="number">0x02</span>, <span class="number">0x6a</span>, <span class="number">0x03</span>, <span class="number">0x61</span>, <span class="number">0x45</span>, <span class="number">0xa9</span>, <span class="number">0x0a</span>, <span class="number">0x4a</span>, <span class="number">0x05</span>,
            <span class="number">0x25</span>, <span class="number">0x25</span>, <span class="number">0x2d</span>, <span class="number">0x09</span>, <span class="number">0x9a</span>, <span class="number">0x68</span>, <span class="number">0xda</span>, <span class="number">0x08</span>, <span class="number">0xb4</span>, <span class="number">0x09</span>, <span class="number">0xa8</span>, <span class="number">0x59</span>, <span class="number">0x54</span>, <span class="number">0x03</span>, <span class="number">0xa5</span>, <span class="number">0x0a</span>, <span class="number">0x91</span>, <span class="number">0x3a</span>,
            <span class="number">0x96</span>, <span class="number">0x04</span>, <span class="number">0xad</span>, <span class="number">0xb0</span>, <span class="number">0xad</span>, <span class="number">0x04</span>, <span class="number">0xda</span>, <span class="number">0x04</span>, <span class="number">0xf4</span>, <span class="number">0x62</span>, <span class="number">0xb4</span>, <span class="number">0x05</span>, <span class="number">0x54</span>, <span class="number">0x0b</span>, <span class="number">0x44</span>, <span class="number">0x5d</span>, <span class="number">0x52</span>, <span class="number">0x0a</span>,
            <span class="number">0x95</span>, <span class="number">0x04</span>, <span class="number">0x55</span>, <span class="number">0x22</span>, <span class="number">0x6d</span>, <span class="number">0x02</span>, <span class="number">0x5a</span>, <span class="number">0x71</span>, <span class="number">0xda</span>, <span class="number">0x02</span>, <span class="number">0xaa</span>, <span class="number">0x05</span>, <span class="number">0xb2</span>, <span class="number">0x55</span>, <span class="number">0x49</span>, <span class="number">0x0b</span>, <span class="number">0x4a</span>, <span class="number">0x0a</span>,
            <span class="number">0x2d</span>, <span class="number">0x39</span>, <span class="number">0x36</span>, <span class="number">0x01</span>, <span class="number">0x6d</span>, <span class="number">0x80</span>, <span class="number">0x6d</span>, <span class="number">0x01</span>, <span class="number">0xd9</span>, <span class="number">0x02</span>, <span class="number">0xe9</span>, <span class="number">0x6a</span>, <span class="number">0xa8</span>, <span class="number">0x05</span>, <span class="number">0x29</span>, <span class="number">0x0b</span>, <span class="number">0x9a</span>, <span class="number">0x4c</span>,
            <span class="number">0xaa</span>, <span class="number">0x08</span>, <span class="number">0xb6</span>, <span class="number">0x08</span>, <span class="number">0xb4</span>, <span class="number">0x38</span>, <span class="number">0x6c</span>, <span class="number">0x09</span>, <span class="number">0x54</span>, <span class="number">0x75</span>, <span class="number">0xd4</span>, <span class="number">0x0a</span>, <span class="number">0xa4</span>, <span class="number">0x05</span>, <span class="number">0x45</span>, <span class="number">0x55</span>, <span class="number">0x95</span>, <span class="number">0x0a</span>,
            <span class="number">0x9a</span>, <span class="number">0x04</span>, <span class="number">0x55</span>, <span class="number">0x44</span>, <span class="number">0xb5</span>, <span class="number">0x04</span>, <span class="number">0x6a</span>, <span class="number">0x82</span>, <span class="number">0x6a</span>, <span class="number">0x05</span>, <span class="number">0xd2</span>, <span class="number">0x0a</span>, <span class="number">0x92</span>, <span class="number">0x6a</span>, <span class="number">0x4a</span>, <span class="number">0x05</span>, <span class="number">0x55</span>, <span class="number">0x0a</span>,
            <span class="number">0x2a</span>, <span class="number">0x4a</span>, <span class="number">0x5a</span>, <span class="number">0x02</span>, <span class="number">0xb5</span>, <span class="number">0x02</span>, <span class="number">0xb2</span>, <span class="number">0x31</span>, <span class="number">0x69</span>, <span class="number">0x03</span>, <span class="number">0x31</span>, <span class="number">0x73</span>, <span class="number">0xa9</span>, <span class="number">0x0a</span>, <span class="number">0x4a</span>, <span class="number">0x05</span>, <span class="number">0x2d</span>, <span class="number">0x55</span>,
            <span class="number">0x2d</span>, <span class="number">0x09</span>, <span class="number">0x5a</span>, <span class="number">0x01</span>, <span class="number">0xd5</span>, <span class="number">0x48</span>, <span class="number">0xb4</span>, <span class="number">0x09</span>, <span class="number">0x68</span>, <span class="number">0x89</span>, <span class="number">0x54</span>, <span class="number">0x0b</span>, <span class="number">0xa4</span>, <span class="number">0x0a</span>, <span class="number">0xa5</span>, <span class="number">0x6a</span>, <span class="number">0x95</span>, <span class="number">0x04</span>,
            <span class="number">0xad</span>, <span class="number">0x08</span>, <span class="number">0x6a</span>, <span class="number">0x44</span>, <span class="number">0xda</span>, <span class="number">0x04</span>, <span class="number">0x74</span>, <span class="number">0x05</span>, <span class="number">0xb0</span>, <span class="number">0x25</span>, <span class="number">0x54</span>, <span class="number">0x03</span> };

    <span class="comment">// 初始日，公历农历对应日期：</span>
    <span class="comment">// 公历 1901 年 1 月 1 日，对应农历 4598 年 11 月 11 日</span>
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> baseYear = <span class="number">1901</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> baseMonth = <span class="number">1</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> baseDate = <span class="number">1</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> baseIndex = <span class="number">0</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> baseChineseYear = <span class="number">4598</span> - <span class="number">1</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> baseChineseMonth = <span class="number">11</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> baseChineseDate = <span class="number">11</span>;

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">char</span>[][] sectionalTermMap = {
            { <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span> },
            { <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span> },
            { <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span> },
            { <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span> },
            { <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span> },
            { <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span> },
            { <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span> },
            { <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span> },
            { <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span> },
            { <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span> },
            { <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span> },
            { <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span> } };

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">char</span>[][] sectionalTermYear = { { <span class="number">13</span>, <span class="number">49</span>, <span class="number">85</span>, <span class="number">117</span>, <span class="number">149</span>, <span class="number">185</span>, <span class="number">201</span>, <span class="number">250</span>, <span class="number">250</span> },
            { <span class="number">13</span>, <span class="number">45</span>, <span class="number">81</span>, <span class="number">117</span>, <span class="number">149</span>, <span class="number">185</span>, <span class="number">201</span>, <span class="number">250</span>, <span class="number">250</span> }, { <span class="number">13</span>, <span class="number">48</span>, <span class="number">84</span>, <span class="number">112</span>, <span class="number">148</span>, <span class="number">184</span>, <span class="number">200</span>, <span class="number">201</span>, <span class="number">250</span> },
            { <span class="number">13</span>, <span class="number">45</span>, <span class="number">76</span>, <span class="number">108</span>, <span class="number">140</span>, <span class="number">172</span>, <span class="number">200</span>, <span class="number">201</span>, <span class="number">250</span> }, { <span class="number">13</span>, <span class="number">44</span>, <span class="number">72</span>, <span class="number">104</span>, <span class="number">132</span>, <span class="number">168</span>, <span class="number">200</span>, <span class="number">201</span>, <span class="number">250</span> },
            { <span class="number">5</span>, <span class="number">33</span>, <span class="number">68</span>, <span class="number">96</span>, <span class="number">124</span>, <span class="number">152</span>, <span class="number">188</span>, <span class="number">200</span>, <span class="number">201</span> }, { <span class="number">29</span>, <span class="number">57</span>, <span class="number">85</span>, <span class="number">120</span>, <span class="number">148</span>, <span class="number">176</span>, <span class="number">200</span>, <span class="number">201</span>, <span class="number">250</span> },
            { <span class="number">13</span>, <span class="number">48</span>, <span class="number">76</span>, <span class="number">104</span>, <span class="number">132</span>, <span class="number">168</span>, <span class="number">196</span>, <span class="number">200</span>, <span class="number">201</span> }, { <span class="number">25</span>, <span class="number">60</span>, <span class="number">88</span>, <span class="number">120</span>, <span class="number">148</span>, <span class="number">184</span>, <span class="number">200</span>, <span class="number">201</span>, <span class="number">250</span> },
            { <span class="number">16</span>, <span class="number">44</span>, <span class="number">76</span>, <span class="number">108</span>, <span class="number">144</span>, <span class="number">172</span>, <span class="number">200</span>, <span class="number">201</span>, <span class="number">250</span> }, { <span class="number">28</span>, <span class="number">60</span>, <span class="number">92</span>, <span class="number">124</span>, <span class="number">160</span>, <span class="number">192</span>, <span class="number">200</span>, <span class="number">201</span>, <span class="number">250</span> },
            { <span class="number">17</span>, <span class="number">53</span>, <span class="number">85</span>, <span class="number">124</span>, <span class="number">156</span>, <span class="number">188</span>, <span class="number">200</span>, <span class="number">201</span>, <span class="number">250</span> } };

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">char</span>[][] principleTermMap = {
            { <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">19</span>,
                    <span class="number">19</span>, <span class="number">20</span> },
            { <span class="number">20</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>,
                    <span class="number">18</span>, <span class="number">18</span> },
            { <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">19</span>, <span class="number">20</span>,
                    <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span> },
            { <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">19</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">19</span>, <span class="number">19</span>,
                    <span class="number">19</span>, <span class="number">20</span>, <span class="number">20</span> },
            { <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>,
                    <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span> },
            { <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">20</span>, <span class="number">20</span>,
                    <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span> },
            { <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>,
                    <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span> },
            { <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>,
                    <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span> },
            { <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>,
                    <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span> },
            { <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>,
                    <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span> },
            { <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>,
                    <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span> },
            { <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">21</span>,
                    <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span> } };

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">char</span>[][] principleTermYear = { { <span class="number">13</span>, <span class="number">45</span>, <span class="number">81</span>, <span class="number">113</span>, <span class="number">149</span>, <span class="number">185</span>, <span class="number">201</span> },
            { <span class="number">21</span>, <span class="number">57</span>, <span class="number">93</span>, <span class="number">125</span>, <span class="number">161</span>, <span class="number">193</span>, <span class="number">201</span> }, { <span class="number">21</span>, <span class="number">56</span>, <span class="number">88</span>, <span class="number">120</span>, <span class="number">152</span>, <span class="number">188</span>, <span class="number">200</span>, <span class="number">201</span> },
            { <span class="number">21</span>, <span class="number">49</span>, <span class="number">81</span>, <span class="number">116</span>, <span class="number">144</span>, <span class="number">176</span>, <span class="number">200</span>, <span class="number">201</span> }, { <span class="number">17</span>, <span class="number">49</span>, <span class="number">77</span>, <span class="number">112</span>, <span class="number">140</span>, <span class="number">168</span>, <span class="number">200</span>, <span class="number">201</span> },
            { <span class="number">28</span>, <span class="number">60</span>, <span class="number">88</span>, <span class="number">116</span>, <span class="number">148</span>, <span class="number">180</span>, <span class="number">200</span>, <span class="number">201</span> }, { <span class="number">25</span>, <span class="number">53</span>, <span class="number">84</span>, <span class="number">112</span>, <span class="number">144</span>, <span class="number">172</span>, <span class="number">200</span>, <span class="number">201</span> },
            { <span class="number">29</span>, <span class="number">57</span>, <span class="number">89</span>, <span class="number">120</span>, <span class="number">148</span>, <span class="number">180</span>, <span class="number">200</span>, <span class="number">201</span> }, { <span class="number">17</span>, <span class="number">45</span>, <span class="number">73</span>, <span class="number">108</span>, <span class="number">140</span>, <span class="number">168</span>, <span class="number">200</span>, <span class="number">201</span> },
            { <span class="number">28</span>, <span class="number">60</span>, <span class="number">92</span>, <span class="number">124</span>, <span class="number">160</span>, <span class="number">192</span>, <span class="number">200</span>, <span class="number">201</span> }, { <span class="number">16</span>, <span class="number">44</span>, <span class="number">80</span>, <span class="number">112</span>, <span class="number">148</span>, <span class="number">180</span>, <span class="number">200</span>, <span class="number">201</span> },
            { <span class="number">17</span>, <span class="number">53</span>, <span class="number">88</span>, <span class="number">120</span>, <span class="number">156</span>, <span class="number">188</span>, <span class="number">200</span>, <span class="number">201</span> } };

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span>[] bigLeapMonthYears = {
            <span class="comment">// 大闰月的闰年年份</span>
            <span class="number">6</span>, <span class="number">14</span>, <span class="number">19</span>, <span class="number">25</span>, <span class="number">33</span>, <span class="number">36</span>, <span class="number">38</span>, <span class="number">41</span>, <span class="number">44</span>, <span class="number">52</span>, <span class="number">55</span>, <span class="number">79</span>, <span class="number">117</span>, <span class="number">136</span>, <span class="number">147</span>, <span class="number">150</span>, <span class="number">155</span>, <span class="number">158</span>, <span class="number">185</span>, <span class="number">193</span> };

    <span class="keyword">public</span> CalendarUtil() {
        setGregorian(<span class="number">1901</span>, <span class="number">1</span>, <span class="number">1</span>);
        computeChineseFields();
        computeSolarTerms();
    }

    <span class="keyword">public</span> CalendarUtil(<span class="built_in">int</span> y, <span class="built_in">int</span> m, <span class="built_in">int</span> d){
        setGregorian(y, m, d);
        computeChineseFields();
        computeSolarTerms();
    }

    <span class="comment">/**
     * 得到对应天的农历 要判断闰月 月初 月末 *
     *
     * @param y
     * @param m
     * @param d
     * @return String
     */</span>
    <span class="keyword">public</span> <span class="keyword">String</span> getChineseDay(<span class="built_in">int</span> y, <span class="built_in">int</span> m, <span class="built_in">int</span> d) {
        CalendarUtil c=<span class="keyword">new</span> CalendarUtil(y,m,d);
        <span class="built_in">int</span> cd = c.getChineseDate();
        <span class="keyword">return</span> daysOfAlmanac[cd - <span class="number">1</span>];
    }

    <span class="comment">/**
     * 得到对应天的农历 要判断闰月 月初 月末
     *
     * @param y
     * @param m
     * @param d
     * @return
     */</span>
    <span class="keyword">public</span> <span class="keyword">String</span> getChineseMonth(<span class="built_in">int</span> y, <span class="built_in">int</span> m, <span class="built_in">int</span> d) {
        setGregorian(y, m, d);
        computeChineseFields();
        computeSolarTerms();
        <span class="built_in">int</span> cd = getChineseMonth();
        <span class="keyword">if</span> (cd &lt; <span class="number">1</span> || cd &gt; <span class="number">29</span>)
            cd = <span class="number">1</span>;
        <span class="keyword">return</span> monthOfAlmanac[cd - <span class="number">1</span>];
    }

    <span class="comment">/**
     * 设置公历年月日
     * @param y
     * @param m
     * @param d
     */</span>
    <span class="keyword">public</span> <span class="keyword">void</span> setGregorian(<span class="built_in">int</span> y, <span class="built_in">int</span> m, <span class="built_in">int</span> d) {
        gregorianYear = y;
        gregorianMonth = m;
        gregorianDate = d;
        isGregorianLeap = isGregorianLeapYear(y);
        dayOfYear = dayOfYear(y, m, d);
        dayOfWeek = dayOfWeek(y, m, d);
        chineseYear = <span class="number">0</span>;
        chineseMonth = <span class="number">0</span>;
        chineseDate = <span class="number">0</span>;
        sectionalTerm = <span class="number">0</span>;
        principleTerm = <span class="number">0</span>;
    }

    <span class="comment">/**
     *  判断是否是公历闰年
     * @param year
     * @return
     */</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isGregorianLeapYear(<span class="built_in">int</span> <span class="built_in">year</span>) {
        <span class="built_in">boolean</span> isLeap = <span class="keyword">false</span>;
        <span class="keyword">if</span> (<span class="built_in">year</span> % <span class="number">4</span> == <span class="number">0</span>)
            isLeap = <span class="keyword">true</span>;
        <span class="keyword">if</span> (<span class="built_in">year</span> % <span class="number">100</span> == <span class="number">0</span>)
            isLeap = <span class="keyword">false</span>;
        <span class="keyword">if</span> (<span class="built_in">year</span> % <span class="number">400</span> == <span class="number">0</span>)
            isLeap = <span class="keyword">true</span>;
        <span class="keyword">return</span> isLeap;
    }

    <span class="comment">/**
     * 返回一个月有几天
     * @param y
     * @param m
     * @return
     */</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> daysInGregorianMonth(<span class="built_in">int</span> y, <span class="built_in">int</span> m) {
        <span class="built_in">int</span> d = daysInGregorianMonth[m - <span class="number">1</span>];
        <span class="keyword">if</span> (m == <span class="number">2</span> &amp;&amp; isGregorianLeapYear(y))
            d++; <span class="comment">// 公历闰年二月多一天</span>
        <span class="keyword">return</span> d;
    }

    <span class="comment">/**
     * 计算当前天在本年中是第几天
     * @param y
     * @param m
     * @param d
     * @return
     */</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> dayOfYear(<span class="built_in">int</span> y, <span class="built_in">int</span> m, <span class="built_in">int</span> d) {
        <span class="built_in">int</span> c = <span class="number">0</span>;
        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; m; i++) {
            c = c + daysInGregorianMonth(y, i);
        }
        c = c + d;
        <span class="keyword">return</span> c;
    }

    <span class="comment">/**
     * 当前天是本周的第几天 ， 从星期天开始算
     * @param y
     * @param m
     * @param d
     * @return
     */</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> dayOfWeek(<span class="built_in">int</span> y, <span class="built_in">int</span> m, <span class="built_in">int</span> d) {
        <span class="built_in">int</span> w = <span class="number">1</span>; <span class="comment">// 公历一年一月一日是星期一，所以起始值为星期日</span>
        y = (y - <span class="number">1</span>) % <span class="number">400</span> + <span class="number">1</span>; <span class="comment">// 公历星期值分部 400 年循环一次</span>
        <span class="built_in">int</span> ly = (y - <span class="number">1</span>) / <span class="number">4</span>; <span class="comment">// 闰年次数</span>
        ly = ly - (y - <span class="number">1</span>) / <span class="number">100</span>;
        ly = ly + (y - <span class="number">1</span>) / <span class="number">400</span>;
        <span class="built_in">int</span> ry = y - <span class="number">1</span> - ly; <span class="comment">// 常年次数</span>
        w = w + ry; <span class="comment">// 常年星期值增一</span>
        w = w + <span class="number">2</span> * ly; <span class="comment">// 闰年星期值增二</span>
        w = w + dayOfYear(y, m, d);
        w = (w - <span class="number">1</span>) % <span class="number">7</span> + <span class="number">1</span>;
        <span class="keyword">return</span> w;
    }

    <span class="comment">/**
     * 计算农历
     * @return
     */</span>
    <span class="keyword">public</span> <span class="built_in">int</span> computeChineseFields() {
        <span class="keyword">if</span> (gregorianYear &lt; <span class="number">1901</span> || gregorianYear &gt; <span class="number">2100</span>)
            <span class="keyword">return</span> <span class="number">1</span>;
        <span class="built_in">int</span> startYear = baseYear;
        <span class="built_in">int</span> startMonth = baseMonth;
        <span class="built_in">int</span> startDate = baseDate;
        chineseYear = baseChineseYear;
        chineseMonth = baseChineseMonth;
        chineseDate = baseChineseDate;
        <span class="comment">// 第二个对应日，用以提高计算效率</span>
        <span class="comment">// 公历 2000 年 1 月 1 日，对应农历 4697 年 11 月 25 日</span>
        <span class="keyword">if</span> (gregorianYear &gt;= <span class="number">2000</span>) {
            startYear = baseYear + <span class="number">99</span>;
            startMonth = <span class="number">1</span>;
            startDate = <span class="number">1</span>;
            chineseYear = baseChineseYear + <span class="number">99</span>;
            chineseMonth = <span class="number">11</span>;
            chineseDate = <span class="number">25</span>;
        }
        <span class="built_in">int</span> daysDiff = <span class="number">0</span>;
        <span class="keyword">for</span> (<span class="built_in">int</span> i = startYear; i &lt; gregorianYear; i++) {
            daysDiff += <span class="number">365</span>;
            <span class="keyword">if</span> (isGregorianLeapYear(i))
                daysDiff += <span class="number">1</span>; <span class="comment">// leap year</span>
        }
        <span class="keyword">for</span> (<span class="built_in">int</span> i = startMonth; i &lt; gregorianMonth; i++) {
            daysDiff += daysInGregorianMonth(gregorianYear, i);
        }
        daysDiff += gregorianDate - startDate;

        chineseDate += daysDiff;
        <span class="built_in">int</span> lastDate = daysInChineseMonth(chineseYear, chineseMonth);
        <span class="built_in">int</span> nextMonth = nextChineseMonth(chineseYear, chineseMonth);
        <span class="keyword">while</span> (chineseDate &gt; lastDate) {
            <span class="keyword">if</span> (Math.<span class="built_in">abs</span>(nextMonth) &lt; Math.<span class="built_in">abs</span>(chineseMonth))
                chineseYear++;
            chineseMonth = nextMonth;
            chineseDate -= lastDate;
            lastDate = daysInChineseMonth(chineseYear, chineseMonth);
            nextMonth = nextChineseMonth(chineseYear, chineseMonth);
        }
        <span class="keyword">return</span> <span class="number">0</span>;
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> daysInChineseMonth(<span class="built_in">int</span> y, <span class="built_in">int</span> m) {
        <span class="comment">// 注意：闰月 m &lt; 0</span>
        <span class="built_in">int</span> index = y - baseChineseYear + baseIndex;
        <span class="built_in">int</span> v = <span class="number">0</span>;
        <span class="built_in">int</span> l = <span class="number">0</span>;
        <span class="built_in">int</span> d = <span class="number">30</span>;
        <span class="keyword">if</span> (<span class="number">1</span> &lt;= m &amp;&amp; m &lt;= <span class="number">8</span>) {
            v = chineseMonths[<span class="number">2</span> * index];
            l = m - <span class="number">1</span>;
            <span class="keyword">if</span> (((v &gt;&gt; l) &amp; <span class="number">0x01</span>) == <span class="number">1</span>)
                d = <span class="number">29</span>;
        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">9</span> &lt;= m &amp;&amp; m &lt;= <span class="number">12</span>) {
            v = chineseMonths[<span class="number">2</span> * index + <span class="number">1</span>];
            l = m - <span class="number">9</span>;
            <span class="keyword">if</span> (((v &gt;&gt; l) &amp; <span class="number">0x01</span>) == <span class="number">1</span>)
                d = <span class="number">29</span>;
        } <span class="keyword">else</span> {
            v = chineseMonths[<span class="number">2</span> * index + <span class="number">1</span>];
            v = (v &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0F</span>;
            <span class="keyword">if</span> (v != Math.<span class="built_in">abs</span>(m)) {
                d = <span class="number">0</span>;
            } <span class="keyword">else</span> {
                d = <span class="number">29</span>;
                <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; bigLeapMonthYears.length; i++) {
                    <span class="keyword">if</span> (bigLeapMonthYears[i] == index) {
                        d = <span class="number">30</span>;
                        <span class="keyword">break</span>;
                    }
                }
            }
        }
        <span class="keyword">return</span> d;
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> nextChineseMonth(<span class="built_in">int</span> y, <span class="built_in">int</span> m) {
        <span class="built_in">int</span> n = Math.<span class="built_in">abs</span>(m) + <span class="number">1</span>;
        <span class="keyword">if</span> (m &gt; <span class="number">0</span>) {
            <span class="built_in">int</span> index = y - baseChineseYear + baseIndex;
            <span class="built_in">int</span> v = chineseMonths[<span class="number">2</span> * index + <span class="number">1</span>];
            v = (v &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0F</span>;
            <span class="keyword">if</span> (v == m)
                n = -m;
        }
        <span class="keyword">if</span> (n == <span class="number">13</span>)
            n = <span class="number">1</span>;
        <span class="keyword">return</span> n;
    }

    <span class="comment">/**
     * 获取节气时间
     * 节气在本月的sectionalTerm号
     * 中气在本月的principleTerm号
     * @return
     */</span>
    <span class="keyword">public</span> <span class="built_in">int</span> computeSolarTerms() {
        <span class="keyword">if</span> (gregorianYear &lt; <span class="number">1901</span> || gregorianYear &gt; <span class="number">2100</span>)
            <span class="keyword">return</span> <span class="number">1</span>;
        sectionalTerm = sectionalTerm(gregorianYear, gregorianMonth);
        principleTerm = principleTerm(gregorianYear, gregorianMonth);
        <span class="keyword">return</span> <span class="number">0</span>;
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> sectionalTerm(<span class="built_in">int</span> y, <span class="built_in">int</span> m) {
        <span class="keyword">if</span> (y &lt; <span class="number">1901</span> || y &gt; <span class="number">2100</span>)
            <span class="keyword">return</span> <span class="number">0</span>;
        <span class="built_in">int</span> index = <span class="number">0</span>;
        <span class="built_in">int</span> ry = y - baseYear + <span class="number">1</span>;
        <span class="keyword">while</span> (ry &gt;= sectionalTermYear[m - <span class="number">1</span>][index])
            index++;
        <span class="built_in">int</span> term = sectionalTermMap[m - <span class="number">1</span>][<span class="number">4</span> * index + ry % <span class="number">4</span>];
        <span class="keyword">if</span> ((ry == <span class="number">121</span>) &amp;&amp; (m == <span class="number">4</span>))
            term = <span class="number">5</span>;
        <span class="keyword">if</span> ((ry == <span class="number">132</span>) &amp;&amp; (m == <span class="number">4</span>))
            term = <span class="number">5</span>;
        <span class="keyword">if</span> ((ry == <span class="number">194</span>) &amp;&amp; (m == <span class="number">6</span>))
            term = <span class="number">6</span>;
        <span class="keyword">return</span> term;
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> principleTerm(<span class="built_in">int</span> y, <span class="built_in">int</span> m) {
        <span class="keyword">if</span> (y &lt; <span class="number">1901</span> || y &gt; <span class="number">2100</span>)
            <span class="keyword">return</span> <span class="number">0</span>;
        <span class="built_in">int</span> index = <span class="number">0</span>;
        <span class="built_in">int</span> ry = y - baseYear + <span class="number">1</span>;
        <span class="keyword">while</span> (ry &gt;= principleTermYear[m - <span class="number">1</span>][index])
            index++;
        <span class="built_in">int</span> term = principleTermMap[m - <span class="number">1</span>][<span class="number">4</span> * index + ry % <span class="number">4</span>];
        <span class="keyword">if</span> ((ry == <span class="number">171</span>) &amp;&amp; (m == <span class="number">3</span>))
            term = <span class="number">21</span>;
        <span class="keyword">if</span> ((ry == <span class="number">181</span>) &amp;&amp; (m == <span class="number">5</span>))
            term = <span class="number">21</span>;
        <span class="keyword">return</span> term;
    }

    <span class="comment">/**
     * 打印年历
     * @return
     */</span>
    <span class="keyword">public</span> <span class="keyword">String</span>[] getYearTable() {
        setGregorian(gregorianYear, <span class="number">1</span>, <span class="number">1</span>);
        computeChineseFields();
        computeSolarTerms();
        <span class="keyword">String</span>[] table = <span class="keyword">new</span> <span class="keyword">String</span>[<span class="number">58</span>]; <span class="comment">// 6*9 + 4</span>
        table[<span class="number">0</span>] = <span class="string">"\t公历年历："</span> + gregorianYear;
        table[<span class="number">1</span>] = <span class="string">"\t农历年历："</span> + (chineseYear + <span class="number">1</span>) + <span class="string">" ("</span> + stemNames[(chineseYear + <span class="number">1</span> - <span class="number">1</span>) % <span class="number">10</span>]
                + branchNames[(chineseYear + <span class="number">1</span> - <span class="number">1</span>) % <span class="number">12</span>] + <span class="string">" - "</span> + animalNames[(chineseYear + <span class="number">1</span> - <span class="number">1</span>) % <span class="number">12</span>] + <span class="string">"年)"</span>;
        <span class="built_in">int</span> ln = <span class="number">2</span>;
        <span class="keyword">String</span> blank = <span class="string">"\t"</span>;
        <span class="keyword">String</span>[] mLeft = <span class="keyword">null</span>;
        <span class="keyword">String</span>[] mRight = <span class="keyword">null</span>;
        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">6</span>; i++) {
            table[ln] = blank;
            ln++;
            mLeft = getMonthTable();
            mRight = getMonthTable();
            <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; mLeft.length; j++) {
                <span class="keyword">String</span> <span class="built_in">line</span> = mLeft[j] + <span class="string">"\t\t"</span> + mRight[j];
                table[ln] = <span class="built_in">line</span>;
                ln++;
            }
        }
        table[ln] = blank;
        ln++;
        table[ln] = <span class="string">"\t##/## - 公历日期/农历日期，(*)#月 - (闰)农历月第一天"</span>;
        ln++;
        <span class="keyword">return</span> table;
    }

    <span class="comment">/**
     * 打印月历
     * @return
     */</span>
    <span class="keyword">public</span> <span class="keyword">String</span>[] getMonthTable() {
        setGregorian(gregorianYear, gregorianMonth, <span class="number">1</span>);
        computeChineseFields();
        computeSolarTerms();
        <span class="keyword">String</span>[] table = <span class="keyword">new</span> <span class="keyword">String</span>[<span class="number">8</span>];
        <span class="keyword">String</span> title = <span class="string">"\t\t\t\t"</span> + monthNames[gregorianMonth - <span class="number">1</span>] + <span class="string">"月"</span> + <span class="string">"\t\t\t\t"</span>;
        <span class="keyword">String</span> header = <span class="string">"\t      日\t      一\t      二\t      三\t      四\t      五\t      六\t"</span>;
        <span class="keyword">String</span> blank = <span class="string">"\t\t\t\t\t\t\t\t"</span>;
        table[<span class="number">0</span>] = title;
        table[<span class="number">1</span>] = header;
        <span class="built_in">int</span> wk = <span class="number">2</span>;
        <span class="keyword">String</span> <span class="built_in">line</span> = <span class="string">"\t"</span>;
        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; dayOfWeek; i++) {
            <span class="built_in">line</span> += <span class="string">"\t"</span>;
        }
        <span class="built_in">int</span> days = daysInGregorianMonth(gregorianYear, gregorianMonth);
        <span class="keyword">for</span> (<span class="built_in">int</span> i = gregorianDate; i &lt;= days; i++) {
            <span class="built_in">line</span> += getDateString() + <span class="string">"\t"</span>;
            rollUpOneDay();
            <span class="keyword">if</span> (dayOfWeek == <span class="number">1</span>) {
                table[wk] = <span class="built_in">line</span>;
                <span class="built_in">line</span> = <span class="string">"\t"</span>;
                wk++;
            }
        }
        <span class="keyword">for</span> (<span class="built_in">int</span> i = dayOfWeek; i &lt;= <span class="number">7</span>; i++) {
            <span class="built_in">line</span> += <span class="string">"\t"</span>;
        }
        table[wk] = <span class="built_in">line</span>;
        <span class="keyword">for</span> (<span class="built_in">int</span> i = wk + <span class="number">1</span>; i &lt; table.length; i++) {
            table[i] = blank;
        }
        <span class="keyword">return</span> table;
    }

    <span class="comment">/**
     * 打印当天日期
     * @return
     */</span>
    <span class="keyword">public</span> <span class="keyword">String</span> getDateString() {
        <span class="keyword">String</span> <span class="built_in">str</span> = <span class="string">"*  /  "</span>;
        <span class="keyword">String</span> gm = <span class="keyword">String</span>.valueOf(gregorianMonth);
        <span class="keyword">if</span> (gm.length() == <span class="number">1</span>)
            gm = <span class="string">' '</span> + gm;
        <span class="keyword">String</span> cm = <span class="keyword">String</span>.valueOf(Math.<span class="built_in">abs</span>(chineseMonth));
        <span class="keyword">if</span> (cm.length() == <span class="number">1</span>)
            cm = <span class="string">' '</span> + cm;
        <span class="keyword">String</span> gd = <span class="keyword">String</span>.valueOf(gregorianDate);
        <span class="keyword">if</span> (gd.length() == <span class="number">1</span>)
            gd = <span class="string">' '</span> + gd;
        <span class="keyword">if</span> (gregorianDate == sectionalTerm) {
            <span class="built_in">str</span> = gd + <span class="string">'/'</span> + <span class="string">" "</span> + sectionalTermNames[(gregorianMonth+<span class="number">10</span>)%<span class="number">12</span>];
        } <span class="keyword">else</span> <span class="keyword">if</span> (gregorianDate == principleTerm) {
            <span class="built_in">str</span> = gd + <span class="string">'/'</span> + <span class="string">" "</span> + principleTermNames[(gregorianMonth+<span class="number">10</span>)%<span class="number">12</span>];<span class="comment">//节气是阳历月份分的每月2个，立春在2月份</span>
        } <span class="keyword">else</span> <span class="keyword">if</span> (chineseDate == <span class="number">1</span> &amp;&amp; chineseMonth &gt; <span class="number">0</span>) {
            <span class="built_in">str</span> = gd + <span class="string">'/'</span> + <span class="string">" "</span> + monthOfAlmanac[Math.<span class="built_in">abs</span>(chineseMonth) - <span class="number">1</span>];
        } <span class="keyword">else</span> <span class="keyword">if</span> (chineseDate == <span class="number">1</span> &amp;&amp; chineseMonth &lt; <span class="number">0</span>) {<span class="comment">// 闰月</span>
            <span class="built_in">str</span> = gd + <span class="string">'/'</span> + <span class="string">"*"</span> + monthOfAlmanac[Math.<span class="built_in">abs</span>(chineseMonth) - <span class="number">1</span>];
        } <span class="keyword">else</span> {
            <span class="built_in">str</span> = gd + <span class="string">"/ "</span> + daysOfAlmanac[chineseDate - <span class="number">1</span>];
        }
        <span class="keyword">return</span> <span class="built_in">str</span>;
    }

    <span class="keyword">public</span> <span class="keyword">String</span> getChinaDateString(){
        <span class="keyword">String</span> <span class="built_in">str</span> = <span class="string">""</span>;
        <span class="keyword">String</span> gm = <span class="keyword">String</span>.valueOf(gregorianMonth);
        <span class="keyword">if</span> (gm.length() == <span class="number">1</span>)
            gm = <span class="string">' '</span> + gm;
        <span class="keyword">String</span> cm = <span class="keyword">String</span>.valueOf(Math.<span class="built_in">abs</span>(chineseMonth));
        <span class="keyword">if</span> (cm.length() == <span class="number">1</span>)
            cm = <span class="string">' '</span> + cm;
        <span class="keyword">String</span> gd = <span class="keyword">String</span>.valueOf(gregorianDate);
        <span class="keyword">if</span> (gd.length() == <span class="number">1</span>)
            gd = <span class="string">' '</span> + gd;
        <span class="keyword">if</span> (gregorianDate == sectionalTerm) {
            <span class="built_in">str</span> = sectionalTermNames[Math.<span class="built_in">abs</span>(chineseMonth) - <span class="number">1</span>];
        } <span class="keyword">else</span> <span class="keyword">if</span> (gregorianDate == principleTerm) {
            <span class="built_in">str</span> = principleTermNames[Math.<span class="built_in">abs</span>(chineseMonth) - <span class="number">1</span>];
        } <span class="keyword">else</span> <span class="keyword">if</span> (chineseDate == <span class="number">1</span> &amp;&amp; chineseMonth &gt; <span class="number">0</span>) {
            <span class="built_in">str</span> = monthOfAlmanac[chineseMonth - <span class="number">1</span>];
        } <span class="keyword">else</span> <span class="keyword">if</span> (chineseDate == <span class="number">1</span> &amp;&amp; chineseMonth &lt; <span class="number">0</span>) {<span class="comment">// 闰月</span>
            <span class="built_in">str</span> = <span class="string">"闰"</span>+monthOfAlmanac[-chineseMonth - <span class="number">1</span>];
        } <span class="keyword">else</span> {
            <span class="built_in">str</span> = daysOfAlmanac[chineseDate - <span class="number">1</span>];
        }
        <span class="keyword">return</span> <span class="built_in">str</span>;
    }

    <span class="comment">/**
     * 将日期向后推移一天
     * @return
     */</span>
    <span class="keyword">public</span> <span class="built_in">int</span> rollUpOneDay() {
        dayOfWeek = dayOfWeek % <span class="number">7</span> + <span class="number">1</span>;
        dayOfYear++;
        gregorianDate++;
        <span class="built_in">int</span> days = daysInGregorianMonth(gregorianYear, gregorianMonth);
        <span class="keyword">if</span> (gregorianDate &gt; days) {
            gregorianDate = <span class="number">1</span>;
            gregorianMonth++;
            <span class="keyword">if</span> (gregorianMonth &gt; <span class="number">12</span>) {
                gregorianMonth = <span class="number">1</span>;
                gregorianYear++;
                dayOfYear = <span class="number">1</span>;
                isGregorianLeap = isGregorianLeapYear(gregorianYear);
            }
            sectionalTerm = sectionalTerm(gregorianYear, gregorianMonth);
            principleTerm = principleTerm(gregorianYear, gregorianMonth);
        }
        chineseDate++;
        days = daysInChineseMonth(chineseYear, chineseMonth);
        <span class="keyword">if</span> (chineseDate &gt; days) {
            chineseDate = <span class="number">1</span>;
            chineseMonth = nextChineseMonth(chineseYear, chineseMonth);
            <span class="keyword">if</span> (chineseMonth == <span class="number">1</span>)
                chineseYear++;
        }
        <span class="keyword">return</span> <span class="number">0</span>;
    }

    <span class="comment">/**
     * 打印当前日期信息
     */</span>
    <span class="keyword">public</span> <span class="keyword">String</span> toString() {
        StringBuffer buf = <span class="keyword">new</span> StringBuffer();
        buf.<span class="built_in">append</span>(<span class="string">"公元年Gregorian Year: \t"</span> + gregorianYear + <span class="string">"年\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"月Gregorian Month:  \t"</span> + gregorianMonth + <span class="string">"月\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"日Gregorian Date:  \t"</span> + gregorianDate + <span class="string">"日\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"闰年Is Leap Year:  \t"</span> + isGregorianLeap + <span class="string">"\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"一年 的第几天Day of Year:  \t第"</span> + dayOfYear + <span class="string">"天\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"星期几Day of Week:  \t"</span> + daysOfWeek[dayOfWeek - <span class="number">1</span>] + <span class="string">"\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"中国年Chinese Year:  \t"</span> + chineseYear + <span class="string">"\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"天干Heavenly Stem:  \t"</span> + stemNames[((chineseYear - <span class="number">1</span>) % <span class="number">10</span>)] + <span class="string">"\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"地支Earthly Branch: \t"</span> + branchNames[((chineseYear - <span class="number">1</span>) % <span class="number">12</span>)] + <span class="string">"\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"农历月Chinese Month: \t"</span> + monthOfAlmanac[chineseMonth - <span class="number">1</span>] + <span class="string">"\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"农历日Chinese Date:  \t"</span> + daysOfAlmanac[chineseDate - <span class="number">1</span>] + <span class="string">"\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"Sectional Term:  \t"</span> + sectionalTerm + <span class="string">"日"</span> + sectionalTermNames[chineseMonth - <span class="number">1</span>] + <span class="string">"\n"</span>);
        buf.<span class="built_in">append</span>(<span class="string">"Principle Term:  \t"</span> + principleTerm + <span class="string">"日"</span> + principleTermNames[chineseMonth - <span class="number">1</span>] + <span class="string">"\n"</span>);
        <span class="keyword">return</span> buf.toString();
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] arg) {
        CalendarUtil c = <span class="keyword">new</span> CalendarUtil();
        <span class="keyword">String</span> cmd = <span class="string">"year"</span>;
        Calendar cal = Calendar.getInstance();
        <span class="built_in">int</span> y = <span class="number">2048</span>;<span class="comment">//cal.get(Calendar.YEAR)-1;// 获取年份</span>
        <span class="built_in">int</span> m = cal.<span class="built_in">get</span>(Calendar.MONTH) + <span class="number">1</span>;<span class="comment">// 获取月份</span>
        <span class="built_in">int</span> d = cal.<span class="built_in">get</span>(Calendar.DATE);<span class="comment">// 获取日</span>

        c.setGregorian(y, m, d);
        c.computeChineseFields();
        c.computeSolarTerms();

        <span class="keyword">if</span> (cmd.equalsIgnoreCase(<span class="string">"year"</span>)) {
            <span class="keyword">String</span>[] t = c.getYearTable();
            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; t.length; i++)
                System.out.<span class="built_in">println</span>(t[i]);
        } <span class="keyword">else</span> <span class="keyword">if</span> (cmd.equalsIgnoreCase(<span class="string">"month"</span>)) {
            <span class="keyword">String</span>[] t = c.getMonthTable();
            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; t.length; i++)
                System.out.<span class="built_in">println</span>(t[i]);
        } <span class="keyword">else</span> {
            System.out.<span class="built_in">println</span>(c.toString());
        }
    }






<span class="comment">//    public int getGregorianYear() {</span>
<span class="comment">//        return gregorianYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setGregorianYear(int gregorianYear) {</span>
<span class="comment">//        this.gregorianYear = gregorianYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public int getGregorianMonth() {</span>
<span class="comment">//        return gregorianMonth;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setGregorianMonth(int gregorianMonth) {</span>
<span class="comment">//        this.gregorianMonth = gregorianMonth;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public int getGregorianDate() {</span>
<span class="comment">//        return gregorianDate;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setGregorianDate(int gregorianDate) {</span>
<span class="comment">//        this.gregorianDate = gregorianDate;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public boolean isGregorianLeap() {</span>
<span class="comment">//        return isGregorianLeap;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setGregorianLeap(boolean isGregorianLeap) {</span>
<span class="comment">//        this.isGregorianLeap = isGregorianLeap;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public int getDayOfYear() {</span>
<span class="comment">//        return dayOfYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setDayOfYear(int dayOfYear) {</span>
<span class="comment">//        this.dayOfYear = dayOfYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public int getDayOfWeek() {</span>
<span class="comment">//        return dayOfWeek;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setDayOfWeek(int dayOfWeek) {</span>
<span class="comment">//        this.dayOfWeek = dayOfWeek;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public int getChineseYear() {</span>
<span class="comment">//        return chineseYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setChineseYear(int chineseYear) {</span>
<span class="comment">//        this.chineseYear = chineseYear;</span>
<span class="comment">//    }</span>

    <span class="keyword">public</span> <span class="built_in">int</span> getChineseMonth() {
        <span class="keyword">return</span> chineseMonth;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> setChineseMonth(<span class="built_in">int</span> chineseMonth) {
        <span class="keyword">this</span>.chineseMonth = chineseMonth;
    }

    <span class="keyword">public</span> <span class="built_in">int</span> getChineseDate() {
        <span class="keyword">return</span> chineseDate;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> setChineseDate(<span class="built_in">int</span> chineseDate) {
        <span class="keyword">this</span>.chineseDate = chineseDate;
    }
<span class="comment">//</span>
<span class="comment">//    public int getSectionalTerm() {</span>
<span class="comment">//        return sectionalTerm;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setSectionalTerm(int sectionalTerm) {</span>
<span class="comment">//        this.sectionalTerm = sectionalTerm;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public int getPrincipleTerm() {</span>
<span class="comment">//        return principleTerm;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public void setPrincipleTerm(int principleTerm) {</span>
<span class="comment">//        this.principleTerm = principleTerm;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static char[] getDaysInGregorianMonth() {</span>
<span class="comment">//        return daysInGregorianMonth;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setDaysInGregorianMonth(char[] daysInGregorianMonth) {</span>
<span class="comment">//        CalendarUtil.daysInGregorianMonth = daysInGregorianMonth;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static String[] getStemNames() {</span>
<span class="comment">//        return stemNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setStemNames(String[] stemNames) {</span>
<span class="comment">//        CalendarUtil.stemNames = stemNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static String[] getBranchNames() {</span>
<span class="comment">//        return branchNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBranchNames(String[] branchNames) {</span>
<span class="comment">//        CalendarUtil.branchNames = branchNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static String[] getAnimalNames() {</span>
<span class="comment">//        return animalNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setAnimalNames(String[] animalNames) {</span>
<span class="comment">//        CalendarUtil.animalNames = animalNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static char[] getChineseMonths() {</span>
<span class="comment">//        return chineseMonths;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setChineseMonths(char[] chineseMonths) {</span>
<span class="comment">//        CalendarUtil.chineseMonths = chineseMonths;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static int getBaseYear() {</span>
<span class="comment">//        return baseYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBaseYear(int baseYear) {</span>
<span class="comment">//        CalendarUtil.baseYear = baseYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static int getBaseMonth() {</span>
<span class="comment">//        return baseMonth;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBaseMonth(int baseMonth) {</span>
<span class="comment">//        CalendarUtil.baseMonth = baseMonth;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static int getBaseDate() {</span>
<span class="comment">//        return baseDate;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBaseDate(int baseDate) {</span>
<span class="comment">//        CalendarUtil.baseDate = baseDate;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static int getBaseIndex() {</span>
<span class="comment">//        return baseIndex;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBaseIndex(int baseIndex) {</span>
<span class="comment">//        CalendarUtil.baseIndex = baseIndex;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static int getBaseChineseYear() {</span>
<span class="comment">//        return baseChineseYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBaseChineseYear(int baseChineseYear) {</span>
<span class="comment">//        CalendarUtil.baseChineseYear = baseChineseYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static int getBaseChineseMonth() {</span>
<span class="comment">//        return baseChineseMonth;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBaseChineseMonth(int baseChineseMonth) {</span>
<span class="comment">//        CalendarUtil.baseChineseMonth = baseChineseMonth;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static int getBaseChineseDate() {</span>
<span class="comment">//        return baseChineseDate;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBaseChineseDate(int baseChineseDate) {</span>
<span class="comment">//        CalendarUtil.baseChineseDate = baseChineseDate;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static int[] getBigLeapMonthYears() {</span>
<span class="comment">//        return bigLeapMonthYears;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setBigLeapMonthYears(int[] bigLeapMonthYears) {</span>
<span class="comment">//        CalendarUtil.bigLeapMonthYears = bigLeapMonthYears;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static char[][] getSectionalTermMap() {</span>
<span class="comment">//        return sectionalTermMap;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setSectionalTermMap(char[][] sectionalTermMap) {</span>
<span class="comment">//        CalendarUtil.sectionalTermMap = sectionalTermMap;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static char[][] getSectionalTermYear() {</span>
<span class="comment">//        return sectionalTermYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setSectionalTermYear(char[][] sectionalTermYear) {</span>
<span class="comment">//        CalendarUtil.sectionalTermYear = sectionalTermYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static char[][] getPrincipleTermMap() {</span>
<span class="comment">//        return principleTermMap;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setPrincipleTermMap(char[][] principleTermMap) {</span>
<span class="comment">//        CalendarUtil.principleTermMap = principleTermMap;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static char[][] getPrincipleTermYear() {</span>
<span class="comment">//        return principleTermYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setPrincipleTermYear(char[][] principleTermYear) {</span>
<span class="comment">//        CalendarUtil.principleTermYear = principleTermYear;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static String[] getMonthNames() {</span>
<span class="comment">//        return monthNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setMonthNames(String[] monthNames) {</span>
<span class="comment">//        CalendarUtil.monthNames = monthNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static String[] getPrincipleTermNames() {</span>
<span class="comment">//        return principleTermNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setPrincipleTermNames(String[] principleTermNames) {</span>
<span class="comment">//        CalendarUtil.principleTermNames = principleTermNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static String[] getSectionalTermNames() {</span>
<span class="comment">//        return sectionalTermNames;</span>
<span class="comment">//    }</span>
<span class="comment">//</span>
<span class="comment">//    public static void setSectionalTermNames(String[] sectionalTermNames) {</span>
<span class="comment">//        CalendarUtil.sectionalTermNames = sectionalTermNames;</span>
<span class="comment">//    }</span>
}
</code></pre><h2 id="在日历的菜单中添加“显示农历”选项">在日历的菜单中添加“显示农历”选项</h2><p>在Calander源码中的AllInOneActivity.java中的OnCreateOption中添加   </p>
<pre><code><span class="comment">//添加菜单选项</span>
meunItem=menu.findItem(R.id.show_chineseDate);  
nemuItem.setTitle((Utils.getSharedPrefersence(<span class="keyword">this</span>,<span class="string">"show_chineseDate"</span>,<span class="keyword">false</span>)?R.<span class="built_in">string</span>.show_chinesedate_true:R.String.show_chinesedate_false));    
</code></pre><p>在OnOptionsItemSetected(meunItem item)中添加  </p>
<pre><code><span class="function"><span class="keyword">else</span> <span class="title">if</span><span class="params">(itemId == R.id.show_chinesedate)</span></span>{
  Utils.setSharedPreference(<span class="keyword">this</span>,<span class="string">"show_chinesedate"</span>,(Utils.getSharedPreference(<span class="keyword">this</span>,<span class="string">"show_chinesedate"</span>,<span class="keyword">false</span>)?<span class="keyword">false</span>:<span class="keyword">true</span>));<span class="comment">//保存状态</span>
  MenuItem menuItem = mOptionsMenu.findItem(R.id.show_chinesedate);
  menuItem.setTitle(Utils.getSharedPreference(<span class="keyword">this</span>,<span class="string">"show_chinesedate"</span>,<span class="keyword">false</span>)?R.<span class="keyword">string</span>.show_chinesedate_true:R.<span class="keyword">string</span>.show_chinesedate_false);<span class="comment">//更新菜单显示</span>
  initFragments(mController.getTime(), mController.getViewType(), <span class="keyword">null</span>);<span class="comment">//刷新页面显示</span>
  <span class="keyword">return</span> <span class="keyword">true</span>;
}
</code></pre><p>在这之前我们必须要添加必要的xml文件中添加资源比如：menu中All_in_one_bar.xml中添加   </p>
<pre><code>&lt;item
    android:<span class="variable">id=</span><span class="string">"@+id/show_chainesedate"</span>
    android:<span class="variable">alphabeticShortcut=</span><span class="string">"s"</span>
    android:<span class="variable">title=</span><span class="string">"@string/show_chinesedate_false"</span>
    android:<span class="variable">icon=</span><span class="string">"@drawable/ic_menu_settings_holo_light"</span>
    android:<span class="variable">showAsAction=</span><span class="string">"never"</span>------------------------------------这里是配置是否在标题栏中显示图标
    android:<span class="variable">orderInCategory=</span><span class="string">"11"</span>/&gt;
</code></pre><p>还有在values文件夹下的string中添加show_chinesedate_true、show_chinesedate_false</p>
<blockquote>
<p>1、这里必须注意：添加string时必须要在values中添加对应的值，不能只在values_zh中添加，不然当你切换语言时程序会找不到对应string报错<br>2、还有一点就是在menu中添加选项也必须在menu_land文件中添加对应的，不然当程序却换为横屏显示时会因为找不到选项而报错  </p>
</blockquote>
<h2 id="在日历的月份视图中添加农历显示">在日历的月份视图中添加农历显示</h2><p>在SimpleWeekView.java中的构造方法中读取SharedPreference  </p>
<pre><code><span class="setting">show_chinesedate_flag=<span class="value">Utils.getSharedPreference(context,<span class="string">"show_chinesedate"</span>,<span class="keyword">true</span>);      </span></span>
</code></pre><p>在setWeekParams方法中修改原有代码为  </p>
<pre><code><span class="keyword">if</span>(show_chinesedate_flag){
  mDayNumbers[i] = Integer.toString(<span class="built_in">time</span>.monthDay++)+
    <span class="string">"\n"</span>+<span class="keyword">new</span> CalendarUtil(<span class="built_in">time</span>.<span class="built_in">year</span>,<span class="built_in">time</span>.<span class="built_in">month</span>+<span class="number">1</span>,<span class="built_in">time</span>.monthDay-<span class="number">1</span>).getChinaDateString();
}<span class="keyword">else</span>{
  mDayNumbers[i] = Integer.toString(<span class="built_in">time</span>.monthDay++);
}
</code></pre><h1 id="改变日历图标">改变日历图标</h1><h2 id="找寻icon素材">找寻icon素材</h2><p>在主题包中有大量的手机icon在网上搜索并下载后按教程解压即可<br>还有就是可以通过相关网站获取<a href="http://www.iconfont.cn/" target="_blank" rel="external">iconfont</a>、 <a href="http://www.easyicon.net/" target="_blank" rel="external">easyicon</a></p>
<h2 id="修改Launcher3源码获取素材并显示">修改Launcher3源码获取素材并显示</h2><p>参考文章：<a href="http://www.tuicool.com/articles/JreiUn" target="_blank" rel="external">android launcher 日历图标显示日期</a><br>基本参考上文，createCalendarIconBitmap方法做了部分修改，实现跨应用读取图片并拼合图片</p>
<pre><code><span class="keyword">static</span> Bitmap createCalendarIconBitmap(Drawable icon, Context context){
  Context calendarContext=<span class="keyword">null</span>;
  <span class="keyword">try</span>{
    calendarContext=context.createPackageContext(<span class="string">"com.android.calendar"</span>,Context.CONTEXT_IGNORE_SECURITY);<span class="comment">//获得日历的Context</span>
  }<span class="keyword">catch</span>(NameNotFoundException e){
    System.out.<span class="built_in">println</span>(<span class="string">"not found package \"com.android.calendar\""</span>);
  }
  Bitmap calendarIcon = createIconBitmap(icon,context);
  Drawable drawable_1 =getCalendarIcon_date(calendarContext);
  Drawable drawable_2 =getCalendarIcon_week(calendarContext);
  calendarIcon=((BitmapDrawable)drawable_1).getBitmap();
  Bitmap calendarIcon_week=((BitmapDrawable)drawable_2).getBitmap();
  <span class="keyword">synchronized</span> (sCanvas) {
    <span class="keyword">if</span> (!calendarIcon.isMutable()) {
      calendarIcon = calendarIcon.<span class="built_in">copy</span>(Bitmap.Config.ARGB_8888, <span class="keyword">true</span>);
    }
    Paint paint = <span class="keyword">new</span> Paint();
    Canvas canvas = <span class="keyword">new</span> Canvas(calendarIcon);
    canvas.drawBitmap(calendarIcon_week, <span class="number">0</span>, <span class="number">0</span>, paint);
    canvas.<span class="built_in">save</span>(Canvas.ALL_SAVE_FLAG);
    canvas.restore();
    <span class="keyword">return</span> calendarIcon;
  }
}

<span class="keyword">static</span> Drawable getCalendarIcon_date(Context calendarContext){
  Resources resources=calendarContext.getResources();
  <span class="built_in">int</span> identify = resources.getIdentifier( calendarContext.getPackageName()+<span class="string">":mipmap/"</span>+<span class="string">"calendar"</span>+<span class="keyword">String</span>.valueOf(Calendar.getInstance().<span class="built_in">get</span>(Calendar.DAY_OF_MONTH)) , <span class="keyword">null</span> , <span class="keyword">null</span> );<span class="comment">//获得图片的资源id，如果图片不存在会返回“0”</span>
  <span class="keyword">return</span> resources.getDrawable(identify);
}

<span class="keyword">static</span> Drawable getCalendarIcon_week(Context calendarContext){
  Resources resources=calendarContext.getResources();
  <span class="built_in">int</span> identify;
  <span class="keyword">if</span>(calendarContext.getResources().getConfiguration().locale.getCountry().equals(<span class="string">"CN"</span>)){
    identify=resources.getIdentifier(calendarContext.getPackageName()+<span class="string">":mipmap/"</span>+<span class="string">"day"</span>+<span class="keyword">String</span>.valueOf(Calendar.getInstance().<span class="built_in">get</span>(Calendar.DAY_OF_MONTH))+<span class="string">"_ch"</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);
  }<span class="keyword">else</span>{
    identify=resources.getIdentifier(calendarContext.getPackageName()+<span class="string">":mipmap/"</span>+<span class="string">"day"</span>+<span class="keyword">String</span>.valueOf(Calendar.getInstance().<span class="built_in">get</span>(Calendar.DAY_OF_MONTH))+<span class="string">"_en"</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);
  }
  <span class="keyword">return</span> resources.getDrawable(identify);
}
</code></pre><p>实现的效果是<br>图片素材<br><img src="http://jxust-cgs.github.io/photos/calendar_sucai.png" alt="效果"><br>实现效果<br><img src="http://jxust-cgs.github.io/photos/calendar_logo.png" alt="素材">   </p>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2016/04/29/Android学习笔记（5）——文件操作/" style="float: left;">
        ← android学习笔记（5） ——文件操作
    </a>
    
    
    <a class="pull-right" href="/2016/04/10/正则表达式/">
        正则表达式 →
    </a>
    
	<br/>
</nav>

        <br/>
		<div class="row col-md-offset-2">
            <div class="col-md-8">
    			<div class="youyan">
<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2128248"></script>
<!-- UY END -->

</div>
            </div>
        </div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By Jxust_CGS. All Rights Reserved.<br>
					<span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
					<span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次</span><br />
                </p>
                <p>Theme By <a href="//go.kieran.top" style="color: #767D84">Kieran</a></p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/jxust-CGS" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    
                    
                    
                    <li><a href="http://weibo.com/jxustCGS" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
        
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };
    
    resizeHero();
    
    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>
</body>
</html>
